import{k as F,f as c,p,j as e}from"./index-Cwa0NEzn.js";import{r as n}from"./vendor-B8cRsngS.js";import{m as g,D as E,l as G}from"./firebase-D3F21gxB.js";const I=({user:i,onBack:u})=>{const{preferences:f,updatePreferences:h,resetPreferences:y}=F(),k={preferences:{theme:"light",language:"en",notifications:{email:!0,push:!1,contentGeneration:!0,updates:!0},accessibility:{fontSize:"medium",highContrast:!1,reduceMotion:!1}},isLoading:!1,message:"",error:""},j=(a,s)=>{switch(s.type){case"SET_PREFERENCES":return{...a,preferences:s.payload};case"SET_LOADING":return{...a,isLoading:s.payload};case"SET_MESSAGE":return{...a,message:s.payload};case"SET_ERROR":return{...a,error:s.payload};default:return a}},[{preferences:r,isLoading:o,message:b,error:x},t]=n.useReducer(j,k);n.useEffect(()=>{(async()=>{if(!i||!c){const s=f||p.load();t({type:"SET_PREFERENCES",payload:s});return}try{const s=getAppId(),d=g(c,`artifacts/${s}/users/${i.uid}/settings/preferences`),m=await G(d);if(m.exists()){const l=m.data();t({type:"SET_PREFERENCES",payload:{theme:l.theme||"light",language:l.language||"en",notifications:{email:l.notifications?.email??!0,contentGeneration:l.notifications?.contentGeneration??!0,updates:l.notifications?.updates??!0},accessibility:{fontSize:l.accessibility?.fontSize||"medium",highContrast:l.accessibility?.highContrast??!1,reduceMotion:l.accessibility?.reduceMotion??!1}}})}else{const l=f||p.load();t({type:"SET_PREFERENCES",payload:l})}}catch(s){console.error("Error loading preferences from Firestore:",s);const d=f||p.load();t({type:"SET_PREFERENCES",payload:d})}})()},[i,f]);const N=n.useCallback(async()=>{t({type:"SET_LOADING",payload:!0}),t({type:"SET_MESSAGE",payload:""}),t({type:"SET_ERROR",payload:""});try{if(i&&c){const a=getAppId(),s=g(c,`artifacts/${a}/users/${i.uid}/settings/preferences`);await E(s,{...r,updatedAt:new Date,createdAt:new Date},{merge:!0})}h(r),t({type:"SET_MESSAGE",payload:"Preferences saved successfully!"}),setTimeout(()=>t({type:"SET_MESSAGE",payload:""}),3e3)}catch(a){console.error("Error saving preferences:",a),t({type:"SET_ERROR",payload:"An error occurred while saving preferences."})}finally{t({type:"SET_LOADING",payload:!1})}},[r,i,c,h]),S=n.useCallback(async()=>{t({type:"SET_LOADING",payload:!0});try{y();const a=p.load();if(t({type:"SET_PREFERENCES",payload:a}),i&&c){const s=getAppId(),d=g(c,`artifacts/${s}/users/${i.uid}/settings/preferences`);await E(d,{...a,updatedAt:new Date,createdAt:new Date},{merge:!0})}t({type:"SET_MESSAGE",payload:"Preferences reset to default!"}),setTimeout(()=>t({type:"SET_MESSAGE",payload:""}),3e3)}catch(a){console.error("Error resetting preferences:",a),t({type:"SET_ERROR",payload:"An error occurred while resetting preferences."})}finally{t({type:"SET_LOADING",payload:!1})}},[i,c,y]),v=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,theme:a.target.value}})},[r]),w=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,language:a.target.value}})},[r]),C=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,notifications:{...r.notifications,email:a.target.checked}}})},[r]),R=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,notifications:{...r.notifications,contentGeneration:a.target.checked}}})},[r]),T=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,notifications:{...r.notifications,updates:a.target.checked}}})},[r]),P=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,accessibility:{...r.accessibility,fontSize:a.target.value}}})},[r]),_=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,accessibility:{...r.accessibility,highContrast:a.target.checked}}})},[r]),A=n.useCallback(a=>{t({type:"SET_PREFERENCES",payload:{...r,accessibility:{...r.accessibility,reduceMotion:a.target.checked}}})},[r]);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"w-full px-8 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Preferences"}),e.jsx("button",{onClick:u,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"‚Üê Back"})]}),b&&e.jsx("div",{className:"bg-green-100 dark:bg-green-900/20 border border-green-400 dark:border-green-800 text-green-700 dark:text-green-300 px-4 py-3 rounded mb-6",children:b}),x&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-6",children:x}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Appearance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Theme"}),e.jsxs("select",{value:r.theme,onChange:v,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"system",children:"System"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language"}),e.jsxs("select",{value:r.language,onChange:w,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Email notifications"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.email??!0,onChange:C,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Content generation alerts"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.contentGeneration??!0,onChange:R,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Product updates"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.updates??!0,onChange:T,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Accessibility"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Font Size"}),e.jsxs("select",{value:r.accessibility?.fontSize??"medium",onChange:P,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"small",children:"Small"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"large",children:"Large"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"High contrast mode"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.accessibility?.highContrast??!1,onChange:_,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Reduce motion"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.accessibility?.reduceMotion??!1,onChange:A,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:N,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[o&&e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o?"Saving...":"Save Preferences"]}),e.jsx("button",{onClick:S,disabled:o,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset to Default"}),e.jsx("button",{onClick:u,disabled:o,className:"px-6 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})})})};export{I as default};
