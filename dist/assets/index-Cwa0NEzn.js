const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ContentGenerationPage-CLSliVTm.js","assets/vendor-B8cRsngS.js","assets/users-qGDuvouU.js","assets/aiPersonas-CCT0hpoi.js","assets/GeneratedContentDisplay-BsAPOoNW.js","assets/firebase-D3F21gxB.js","assets/ContentGenerationPage-rpqhM-74.css","assets/MyProfilePage-CKij7pmA.js","assets/star-CFDfeEsZ.js","assets/AdvancedSettingsPage-tGaTBQpb.js","assets/PreferencesPage-CscD4hrl.js","assets/PurchasePage-PYp0WuFM.js"])))=>i.map(i=>d[i]);
import{r as o,a as Qe,R as X}from"./vendor-B8cRsngS.js";import{_ as Or,C as Lr,r as Dt,S as Pr,F as Mr,g as Dr,a as $r,b as Ur,c as Fr,d as zr,i as Zt,e as Xt,f as er,G as Br,s as Hr,h as Vr,j as Wr,k as qr,o as xt,l as Gr,m as Ae,u as tr,n as Qr,p as Kr,q as $t,t as nt,v as Jr,w as Yr,x as Ut,y as Zr,z as Xr,A as es}from"./firebase-D3F21gxB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var rr={exports:{}},Ke={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ts=o,rs=Symbol.for("react.element"),ss=Symbol.for("react.fragment"),ns=Object.prototype.hasOwnProperty,as=ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,os={key:!0,ref:!0,__self:!0,__source:!0};function sr(r,t,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)ns.call(t,n)&&!os.hasOwnProperty(n)&&(a[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:rs,type:r,key:i,ref:l,props:a,_owner:as.current}}Ke.Fragment=ss;Ke.jsx=sr;Ke.jsxs=sr;rr.exports=Ke;var e=rr.exports,nr,Ft=Qe;nr=Ft.createRoot,Ft.hydrateRoot;const is="modulepreload",ls=function(r){return"/"+r},zt={},Ne=function(t,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=Promise.allSettled(s.map(c=>{if(c=ls(c),c in zt)return;zt[c]=!0;const p=c.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":is,p||(h.as="script"),h.crossOrigin="",h.href=c,u&&h.setAttribute("nonce",u),document.head.appendChild(h),p)return new Promise((v,w)=>{h.addEventListener("load",v),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},cs=o.createContext(null),at={didCatch:!1,error:null};let ds=class extends o.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=at}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var s,n,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];(s=(n=this.props).onReset)===null||s===void 0||s.call(n,{args:i,reason:"imperative-api"}),this.setState(at)}}componentDidCatch(t,s){var n,a;(n=(a=this.props).onError)===null||n===void 0||n.call(a,t,s)}componentDidUpdate(t,s){const{didCatch:n}=this.state,{resetKeys:a}=this.props;if(n&&s.error!==null&&us(t.resetKeys,a)){var i,l;(i=(l=this.props).onReset)===null||i===void 0||i.call(l,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(at)}}render(){const{children:t,fallbackRender:s,FallbackComponent:n,fallback:a}=this.props,{didCatch:i,error:l}=this.state;let u=t;if(i){const c={error:l,resetErrorBoundary:this.resetErrorBoundary};if(typeof s=="function")u=s(c);else if(n)u=o.createElement(n,c);else if(a!==void 0)u=a;else throw l}return o.createElement(cs.Provider,{value:{didCatch:i,error:l,resetErrorBoundary:this.resetErrorBoundary}},u)}};function us(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return r.length!==t.length||r.some((s,n)=>!Object.is(s,t[n]))}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gs=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase()),Bt=r=>{const t=gs(r);return t.charAt(0).toUpperCase()+t.slice(1)},ar=(...r)=>r.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim(),ms=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ps={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=o.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...u},c)=>o.createElement("svg",{ref:c,...ps,width:t,height:t,stroke:r,strokeWidth:n?Number(s)*24/Number(t):s,className:ar("lucide",a),...!i&&!ms(u)&&{"aria-hidden":"true"},...u},[...l.map(([p,f])=>o.createElement(p,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=(r,t)=>{const s=o.forwardRef(({className:n,...a},i)=>o.createElement(fs,{ref:i,iconNode:t,className:ar(`lucide-${hs(Bt(r))}`,`lucide-${r}`,n),...a}));return s.displayName=Bt(r),s};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ys=U("book-open",xs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],or=U("brain",bs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],ks=U("bug",vs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dt=U("chevron-down",ws);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Cs=U("circle-alert",Ns);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ss=U("circle-check-big",js);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ts=U("clock",Es);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Is=U("cpu",As);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ht=U("crown",_s);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Os=U("external-link",Rs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Ps=U("heart",Ls);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ds=U("info",Ms);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Vt=U("loader-circle",$s);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Fs=U("log-out",Us);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Bs=U("mic-off",zs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Vs=U("mic",Hs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],qs=U("moon",Ws);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],He=U("refresh-cw",Gs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ut=U("settings",Qs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ht=U("shield",Ks);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],Ys=U("sliders-vertical",Js);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Xs=U("sparkles",Zs);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],tn=U("sun",en);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ie=U("triangle-alert",rn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gt=U("user",sn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ir=U("zap",nn),an=({error:r,resetErrorBoundary:t})=>e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 max-w-md w-full border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"We're sorry, but something unexpected happened. Please try refreshing the page and check your internet connection."}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:e.jsx("strong",{children:"Still having issues?"})}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:"If the problem persists after refreshing and checking your internet connection, please copy the below Development Report and contact our support team:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.95a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("a",{href:"mailto:azkabloch786@gmail.com",className:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline",children:"azkabloch786@gmail.com"})]})]}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl shadow-sm transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300",type:"button",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold py-3 px-6 rounded-xl transition duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-gray-300",type:"button",children:"Refresh Page"})]})]})}),on=(r,t)=>{console.error("Error Boundary caught an error:",r,t)},ln=({children:r})=>e.jsx(ds,{FallbackComponent:an,onError:on,onReset:()=>window.location.reload(),children:r}),yt=({size:r="md",variant:t="default",message:s="Loading...",showMessage:n=!0,className:a="",icon:i="loader"})=>{const l={sm:{icon:"w-4 h-4",container:"w-8 h-8",text:"text-sm",spacing:"space-y-2"},md:{icon:"w-6 h-6",container:"w-12 h-12",text:"text-base",spacing:"space-y-3"},lg:{icon:"w-8 h-8",container:"w-16 h-16",text:"text-lg",spacing:"space-y-4"},xl:{icon:"w-12 h-12",container:"w-20 h-20",text:"text-xl",spacing:"space-y-6"}},u={default:{bg:"bg-blue-100 dark:bg-blue-900/20",iconColor:"text-blue-600 dark:text-blue-400",textColor:"text-gray-700 dark:text-gray-300",animation:"animate-spin"},primary:{bg:"bg-blue-500/10 dark:bg-blue-500/20",iconColor:"text-blue-600 dark:text-blue-400",textColor:"text-blue-700 dark:text-blue-300",animation:"animate-spin"},success:{bg:"bg-green-100 dark:bg-green-900/20",iconColor:"text-green-600 dark:text-green-400",textColor:"text-green-700 dark:text-green-300",animation:"animate-spin"},warning:{bg:"bg-yellow-100 dark:bg-yellow-900/20",iconColor:"text-yellow-600 dark:text-yellow-400",textColor:"text-yellow-700 dark:text-yellow-300",animation:"animate-spin"},error:{bg:"bg-red-100 dark:bg-red-900/20",iconColor:"text-red-600 dark:text-red-400",textColor:"text-red-700 dark:text-red-300",animation:"animate-spin"},gradient:{bg:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 dark:from-blue-500/20 dark:to-purple-500/20",iconColor:"text-blue-600 dark:text-blue-400",textColor:"text-gray-700 dark:text-gray-300",animation:"animate-pulse"},minimal:{bg:"bg-transparent",iconColor:"text-gray-600 dark:text-gray-400",textColor:"text-gray-600 dark:text-gray-400",animation:"animate-spin"}},c={loader:Vt,sparkles:Xs,book:ys,brain:or,zap:ir,cpu:Is,heart:Ps,refresh:He},p=l[r],f=u[t],h=c[i]||Vt,v=()=>{switch(i){case"sparkles":return"animate-pulse";case"heart":return"animate-bounce";case"zap":return"animate-pulse";case"brain":return"animate-pulse";default:return f.animation}},w=()=>e.jsx("div",{className:`flex items-center justify-center ${p.container} ${f.bg} rounded-full`,children:e.jsx(h,{className:`${p.icon} ${f.iconColor} ${v()}`,strokeWidth:2})}),C=()=>e.jsx(h,{className:`${p.icon} ${f.iconColor} ${v()}`,strokeWidth:2});return!n&&!a?e.jsx(C,{}):e.jsxs("div",{className:`flex flex-col items-center justify-center ${p.spacing} ${a}`,children:[e.jsx(w,{}),n&&e.jsx("p",{className:`${p.text} ${f.textColor} font-medium text-center`,children:s})]})},cn=({message:r="Loading page...",componentName:t})=>e.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-gray-50 dark:bg-gray-900",children:e.jsx(yt,{variant:"primary",size:"lg",message:t?`Loading ${t}...`:r,icon:"loader",className:"py-8"})}),dn=({size:r="sm"})=>e.jsx(yt,{variant:"minimal",size:r,showMessage:!1,icon:"loader"}),un=({message:r="Initializing application..."})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center font-sans",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 max-w-md w-full text-center border border-gray-200 dark:border-gray-700",children:[e.jsxs("h1",{className:"text-3xl font-extrabold mb-6",children:[e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:"ECC"})," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:"App"})]}),e.jsx(yt,{variant:"primary",size:"xl",message:r,icon:"sparkles",className:"py-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4 text-sm",children:"Please wait while we prepare your experience"})]})});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="firebasestorage.googleapis.com",hn="storageBucket",gn=2*60*1e3,mn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de extends Mr{constructor(t,s,n=0){super(ot(t),`Firebase Storage: ${s} (${ot(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,de.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ot(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ce;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ce||(ce={}));function ot(r){return"storage/"+r}function pn(){const r="An unknown error occurred, please check the error payload for server response.";return new de(ce.UNKNOWN,r)}function fn(){return new de(ce.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xn(){return new de(ce.CANCELED,"User canceled the upload/download.")}function yn(r){return new de(ce.INVALID_URL,"Invalid URL '"+r+"'.")}function bn(r){return new de(ce.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Wt(r){return new de(ce.INVALID_ARGUMENT,r)}function cr(){return new de(ce.APP_DELETED,"The Firebase app was deleted.")}function vn(r){return new de(ce.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,s){this.bucket=t,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,s){let n;try{n=ae.makeFromUrl(t,s)}catch{return new ae(t,"")}if(n.path==="")return n;throw bn(t)}static makeFromUrl(t,s){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(m){m.path.charAt(m.path.length-1)==="/"&&(m.path_=m.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+a+l,"i"),c={bucket:1,path:3};function p(m){m.path_=decodeURIComponent(m.path)}const f="v[A-Za-z0-9_]+",h=s.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${h}/${f}/b/${a}/o${v}`,"i"),C={bucket:1,path:3},k=s===lr?"(?:storage.googleapis.com|storage.cloud.google.com)":s,j="([^?#]*)",O=new RegExp(`^https?://${k}/${a}/${j}`,"i"),b=[{regex:u,indices:c,postModify:i},{regex:w,indices:C,postModify:p},{regex:O,indices:{bucket:1,path:2},postModify:p}];for(let m=0;m<b.length;m++){const T=b[m],N=T.regex.exec(t);if(N){const E=N[T.indices.bucket];let _=N[T.indices.path];_||(_=""),n=new ae(E,_),T.postModify(n);break}}if(n==null)throw yn(t);return n}}class kn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(r,t,s){let n=1,a=null,i=null,l=!1,u=0;function c(){return u===2}let p=!1;function f(...j){p||(p=!0,t.apply(null,j))}function h(j){a=setTimeout(()=>{a=null,r(w,c())},j)}function v(){i&&clearTimeout(i)}function w(j,...O){if(p){v();return}if(j){v(),f.call(null,j,...O);return}if(c()||l){v(),f.call(null,j,...O);return}n<64&&(n*=2);let b;u===1?(u=2,b=0):b=(n+Math.random())*1e3,h(b)}let C=!1;function k(j){C||(C=!0,v(),!p&&(a!==null?(j||(u=2),clearTimeout(a),h(0)):j||(u=1)))}return h(0),i=setTimeout(()=>{l=!0,k(!0)},s),k}function Nn(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(r){return r!==void 0}function qt(r,t,s,n){if(n<t)throw Wt(`Invalid value for '${r}'. Expected ${t} or greater.`);if(n>s)throw Wt(`Invalid value for '${r}'. Expected ${s} or less.`)}function jn(r){const t=encodeURIComponent;let s="?";for(const n in r)if(r.hasOwnProperty(n)){const a=t(n)+"="+t(r[n]);s=s+a+"&"}return s=s.slice(0,-1),s}var We;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(We||(We={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(r,t){const s=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,i=t.indexOf(r)!==-1;return s||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,s,n,a,i,l,u,c,p,f,h,v=!0){this.url_=t,this.method_=s,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=c,this.timeout_=p,this.progressCallback_=f,this.connectionFactory_=h,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,C)=>{this.resolve_=w,this.reject_=C,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new Me(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const l=u=>{const c=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,p)};this.progressCallback_!==null&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const u=i.getErrorCode()===We.NO_ERROR,c=i.getStatus();if(!u||Sn(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===We.ABORT;n(!1,new Me(!1,null,f));return}const p=this.successCodes_.indexOf(c)!==-1;n(!0,new Me(p,i))})},s=(n,a)=>{const i=this.resolve_,l=this.reject_,u=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());Cn(c)?i(c):i()}catch(c){l(c)}else if(u!==null){const c=pn();c.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,c)):l(c)}else if(a.canceled){const c=this.appDelete_?cr():xn();l(c)}else{const c=fn();l(c)}};this.canceled_?s(!1,new Me(!1,null,!0)):this.backoffId_=wn(t,s,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Nn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Me{constructor(t,s,n){this.wasSuccessCode=t,this.connection=s,this.canceled=!!n}}function Tn(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function An(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function In(r,t){t&&(r["X-Firebase-GMPID"]=t)}function _n(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function Rn(r,t,s,n,a,i,l=!0){const u=jn(r.urlParams),c=r.url+u,p=Object.assign({},r.headers);return In(p,t),Tn(p,s),An(p,i),_n(p,n),new En(c,r.method,p,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function Ln(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t,s){this._service=t,s instanceof ae?this._location=s:this._location=ae.makeFromUrl(s,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,s){return new qe(t,s)}get root(){const t=new ae(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ln(this._location.path)}get storage(){return this._service}get parent(){const t=On(this._location.path);if(t===null)return null;const s=new ae(this._location.bucket,t);return new qe(this._service,s)}_throwIfRoot(t){if(this._location.path==="")throw vn(t)}}function Gt(r,t){const s=t?.[hn];return s==null?null:ae.makeFromBucketSpec(s,r)}function Pn(r,t,s,n={}){r.host=`${t}:${s}`,r._protocol="http";const{mockUserToken:a}=n;a&&(r._overrideAuthToken=typeof a=="string"?a:zr(a,r.app.options.projectId))}class Mn{constructor(t,s,n,a,i){this.app=t,this._authProvider=s,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=lr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gn,this._maxUploadRetryTime=mn,this._requests=new Set,a!=null?this._bucket=ae.makeFromBucketSpec(a,this._host):this._bucket=Gt(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ae.makeFromBucketSpec(this._url,t):this._bucket=Gt(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){qt("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){qt("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const s=await t.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new qe(this,t)}_makeRequest(t,s,n,a,i=!0){if(this._deleted)return new kn(cr());{const l=Rn(t,this._appId,n,a,s,this._firebaseVersion,i);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(t,s){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,s,n,a).getPromise()}}const Qt="@firebase/storage",Kt="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="storage";function Dn(r=Dr(),t){r=$r(r);const n=Ur(r,dr).getImmediate({identifier:t}),a=Fr("storage");return a&&$n(n,...a),n}function $n(r,t,s,n={}){Pn(r,t,s,n)}function Un(r,{instanceIdentifier:t}){const s=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new Mn(s,n,a,t,Pr)}function Fn(){Or(new Lr(dr,Un,"PUBLIC").setMultipleInstances(!0)),Dt(Qt,Kt,""),Dt(Qt,Kt,"esm2017")}Fn();const bt={apiKey:"AIzaSyBNvDI9g6rQdwsPj7muECmr7RKaby6qyQc",authDomain:"project-q-34d01.firebaseapp.com",projectId:"project-q-34d01",storageBucket:"project-q-34d01.firebasestorage.app",messagingSenderId:"910875870805",appId:"1:910875870805:web:e8a5396a8c91825e3fb6dc",measurementId:"G-00GVMJ9MEE"},zn=r=>{const s=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(n=>!r[n]);if(s.length>0)throw console.error("Missing Firebase configuration fields:",s),new Error(`Missing required Firebase configuration: ${s.join(", ")}`);return!0};zn(bt);const vt=Zt(bt),Ce=Xt(vt),Xa=er(vt);Dn(vt);const Bn=async()=>{try{const r=new Br;return(await Hr(Ce,r)).user}catch(r){throw console.error("Google sign in error:",r),r}},Hn=async(r,t)=>{try{return(await Vr(Ce,r,t)).user}catch(s){throw console.error("Email sign in error:",s),s}},Jt=async(r,t)=>{try{return(await Wr(Ce,r,t)).user}catch(s){throw console.error("Email sign up error:",s),s}},Vn=async r=>{try{return await qr(Ce,r),!0}catch(t){throw console.error("Password reset error:",t),t}},Wn=r=>xt(Ce,r),qn=async()=>new Promise(r=>{const t=xt(Ce,s=>{t(),r(s)})}),mt=()=>bt.appId||"defaultAppId",Gn=o.createContext({user:null,isLoading:!0,isAuthenticated:!1,login:async()=>{},logout:async()=>{},updateUser:()=>{}}),Qn=({children:r})=>{const[t,s]=o.useState(null),[n,a]=o.useState(!0);o.useEffect(()=>{let p;return(async()=>{try{const h=await qn();s(h),p=Wn(v=>{s(v),a(!1)})}catch(h){console.error("Auth initialization error:",h),s(null)}finally{a(!1)}})(),()=>{p&&p()}},[]);const i=o.useCallback(async p=>{s(p)},[]),l=o.useCallback(async()=>{s(null)},[]),u=o.useCallback(p=>{s(f=>f?{...f,...p}:null)},[]),c={user:t,isLoading:n,isAuthenticated:!!t,login:i,logout:l,updateUser:u};return e.jsx(Gn.Provider,{value:c,children:r})},ke={PREFERENCES:"ecc_user_preferences",ADVANCED_SETTINGS:"ecc_advanced_settings"},De={theme:"light",language:"en",notifications:{email:!0,push:!1,contentGeneration:!0,updates:!0},accessibility:{fontSize:"medium",highContrast:!1,reduceMotion:!1}},$e={defaultOutputLength:"",defaultInstructions:"",promptTemplates:[],modelSettings:{temperature:.7,maxTokens:1e3}},we={get:r=>{try{const t=localStorage.getItem(r);return t?JSON.parse(t):null}catch(t){return console.error(`Error reading ${r} from localStorage:`,t),null}},set:(r,t)=>{try{return localStorage.setItem(r,JSON.stringify(t)),!0}catch(s){return console.error(`Error saving ${r} to localStorage:`,s),!1}},remove:r=>{try{return localStorage.removeItem(r),!0}catch(t){return console.error(`Error removing ${r} from localStorage:`,t),!1}}},kt=(r,t)=>{const s={...r};for(const n in t)t.hasOwnProperty(n)&&(typeof t[n]=="object"&&t[n]!==null&&!Array.isArray(t[n])?s[n]=kt(r[n]||{},t[n]):s[n]=t[n]);return s},Ue={load:()=>{const r=we.get(ke.PREFERENCES);return r?kt(De,r):De},save:r=>{const t=we.set(ke.PREFERENCES,r);return t&&window.dispatchEvent(new CustomEvent("preferencesChanged",{detail:r})),t},reset:()=>(we.remove(ke.PREFERENCES),window.dispatchEvent(new CustomEvent("preferencesChanged",{detail:De})),De)},eo={load:()=>{const r=we.get(ke.ADVANCED_SETTINGS);return r?kt($e,r):$e},save:r=>{const t=we.set(ke.ADVANCED_SETTINGS,r);return t&&window.dispatchEvent(new CustomEvent("advancedSettingsChanged",{detail:r})),t},reset:()=>(we.remove(ke.ADVANCED_SETTINGS),window.dispatchEvent(new CustomEvent("advancedSettingsChanged",{detail:$e})),$e)},ur=o.createContext({theme:"light",setTheme:()=>{},preferences:{},updatePreferences:()=>{},resetPreferences:()=>{}}),Kn=()=>{const r=o.useContext(ur);if(!r)throw new Error("useSettings must be used within a SettingsProvider");return r},Jn=({children:r})=>{const[t,s]=o.useState("light"),[n,a]=o.useState({}),i=o.useCallback(f=>{const h=document.documentElement;f==="dark"?h.classList.add("dark"):h.classList.remove("dark"),f==="system"&&(window.matchMedia("(prefers-color-scheme: dark)").matches?h.classList.add("dark"):h.classList.remove("dark"))},[]);o.useEffect(()=>{const f=Ue.load();a(f),s(f.theme||"light"),i(f.theme||"light");const h=v=>{const w=v.detail;a(w),w.theme&&(s(w.theme),i(w.theme))};return window.addEventListener("preferencesChanged",h),()=>{window.removeEventListener("preferencesChanged",h)}},[i]);const l=o.useCallback(f=>{s(f),i(f);const h={...n,theme:f};a(h),Ue.save(h)},[n,i]),u=o.useCallback(f=>{const h={...n,...f};a(h),Ue.save(h),f.theme&&f.theme!==t&&(s(f.theme),i(f.theme))},[n,t,i]),c=o.useCallback(()=>{const f=Ue.reset();a(f),s(f.theme),i(f.theme)},[i]);o.useEffect(()=>{if(t==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>i("system");return f.addEventListener("change",h),()=>f.removeEventListener("change",h)}},[t,i]);const p={theme:t,setTheme:l,preferences:n,updatePreferences:u,resetPreferences:c};return e.jsx(ur.Provider,{value:p,children:r})};class Z extends Error{constructor(t,s="error",n=null){super(t),this.name="AppError",this.type=s,this.code=n,this.timestamp=new Date().toISOString()}}const V={NETWORK:"network",VALIDATION:"validation",AUTHENTICATION:"authentication",API:"api",FIRESTORE:"firestore",GENERAL:"general"},_e=(r,t="")=>(console.error(`[${t}] Error:`,r),r.name==="TypeError"&&r.message.includes("Failed to fetch")?new Z("Unable to connect to the server. Please check your internet connection and try again.",V.NETWORK,"NETWORK_ERROR"):r.code&&r.code.startsWith("auth/")?Yn(r):r.code&&r.code.startsWith("firestore/")?Zn(r):r.message&&r.message.includes("API error")?Xn(r):new Z(r.message||"An unexpected error occurred. Please try again.",V.GENERAL,"UNKNOWN_ERROR")),Yn=r=>{const s={"auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters long.","auth/invalid-email":"Please enter a valid email address.","auth/operation-not-allowed":"This sign-in method is not enabled. Please contact support.","auth/user-disabled":"This account has been disabled. Please contact support.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection and try again.","auth/popup-closed-by-user":"Sign-in was cancelled. Please try again.","auth/popup-blocked":"Pop-up blocked. Please allow pop-ups for this site.","auth/cancelled-popup-request":"Sign-in cancelled. Please try again."}[r.code]||`Authentication error: ${r.message}`;return new Z(s,V.AUTHENTICATION,r.code)},Zn=r=>{const s={"firestore/permission-denied":"You don't have permission to access this data.","firestore/not-found":"The requested data was not found.","firestore/already-exists":"This data already exists.","firestore/resource-exhausted":"Service temporarily unavailable. Please try again later.","firestore/failed-precondition":"Operation failed due to system constraints.","firestore/aborted":"Operation was aborted. Please try again.","firestore/out-of-range":"Invalid data range provided.","firestore/unimplemented":"This feature is not yet implemented.","firestore/internal":"Internal server error. Please try again later.","firestore/unavailable":"Service temporarily unavailable. Please try again later.","firestore/data-loss":"Data corruption detected. Please contact support.","firestore/unauthenticated":"You must be signed in to perform this action."}[r.code]||`Database error: ${r.message}`;return new Z(s,V.FIRESTORE,r.code)},Xn=r=>{if(r.message.includes("API error from Netlify Function")){const t=r.message.match(/(\d{3})/),s=t?t[1]:"500",a={400:"Invalid request. Please check your input and try again.",401:"Authentication required. Please sign in and try again.",403:"Access denied. You don't have permission for this action.",404:"Service not found. Please try again later.",429:"Too many requests. Please wait a moment and try again.",500:"Server error. Please try again later.",502:"Service temporarily unavailable. Please try again later.",503:"Service maintenance in progress. Please try again later."}[s]||"API service error. Please try again later.";return new Z(a,V.API,`API_${s}`)}return new Z("Service error. Please try again later.",V.API,"API_UNKNOWN")},Fe=(r,t,s={})=>{const{required:n=!1,minLength:a=0,maxLength:i=1/0}=s;if(n&&(!t||t.trim()===""))throw new Z(`${r} is required.`,V.VALIDATION,"REQUIRED_FIELD");if(t&&t.length<a)throw new Z(`${r} must be at least ${a} characters long.`,V.VALIDATION,"MIN_LENGTH");if(t&&t.length>i)throw new Z(`${r} must be less than ${i} characters long.`,V.VALIDATION,"MAX_LENGTH");if(r==="Email"&&t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Z("Please enter a valid email address.",V.VALIDATION,"INVALID_EMAIL");if(r==="Password"&&t){if(t.length<6)throw new Z("Password must be at least 6 characters long.",V.VALIDATION,"WEAK_PASSWORD");if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t))throw new Z("Password must contain at least one uppercase letter, one lowercase letter, and one number.",V.VALIDATION,"WEAK_PASSWORD")}return!0},it=r=>typeof r!="string"?r:r.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");class ea{constructor(){this.metrics=new Map,this.thresholds={api:5e3,database:3e3,render:1e3,navigation:500},this.observers=[]}startTiming(t,s={}){this.metrics.set(t,{startTime:performance.now(),metadata:s,status:"running"})}endTiming(t,s=!0,n={}){const a=this.metrics.get(t);if(!a)return console.warn(`Performance metric '${t}' not found`),null;const i=performance.now(),l=i-a.startTime,u={key:t,duration:Math.round(l),success:s,timestamp:new Date().toISOString(),...a.metadata,...n};this.metrics.set(t,{...a,endTime:i,duration:l,success:s,status:"completed"});const c=this.getThreshold(t);return l>c&&(console.warn(`Performance warning: ${t} took ${l}ms (threshold: ${c}ms)`),this.notifyObservers("slow_operation",u)),u}getThreshold(t){for(const[s,n]of Object.entries(this.thresholds))if(t.includes(s))return n;return 1e4}async measureFunction(t,s,n={}){this.startTiming(t,n);try{const a=await s();return this.endTiming(t,!0,{result:"success"}),a}catch(a){throw this.endTiming(t,!1,{error:a.message}),a}}async measureApiCall(t,s={}){const n=`api_${t.split("/").pop()}`;this.startTiming(n,{url:t,method:s.method||"GET"});try{const a=await fetch(t,s),i=a.ok;return this.endTiming(n,i,{status:a.status,statusText:a.statusText}),a}catch(a){throw this.endTiming(n,!1,{error:a.message}),a}}async measureDatabaseOperation(t,s,n={}){const a=`database_${t}`;return this.measureFunction(a,s,n)}measureRender(t,s){const n=`render_${t}`;this.startTiming(n,{component:t});try{const a=s();return this.endTiming(n,!0),a}catch(a){throw this.endTiming(n,!1,{error:a.message}),a}}getAllMetrics(){return Array.from(this.metrics.entries()).map(([t,s])=>({key:t,...s}))}getMetricsByType(t){return this.getAllMetrics().filter(s=>s.key.includes(t))}getSlowOperations(){return this.getAllMetrics().filter(t=>{const s=this.getThreshold(t.key);return t.duration>s})}getAveragePerformance(t=null){const n=(t?this.getMetricsByType(t):this.getAllMetrics()).filter(i=>i.status==="completed");if(n.length===0)return 0;const a=n.reduce((i,l)=>i+l.duration,0);return Math.round(a/n.length)}getPerformanceSummary(){const t=this.getAllMetrics(),s=t.filter(l=>l.status==="completed"),n=s.filter(l=>l.success),a=s.filter(l=>!l.success),i=this.getSlowOperations();return{total:t.length,completed:s.length,successful:n.length,failed:a.length,slow:i.length,averageResponseTime:this.getAveragePerformance(),successRate:s.length>0?Math.round(n.length/s.length*100):0,slowOperationRate:s.length>0?Math.round(i.length/s.length*100):0}}clearMetrics(t=3e5){const s=Date.now();for(const[n,a]of this.metrics.entries())s-a.startTime>t&&this.metrics.delete(n)}addObserver(t){this.observers.push(t)}removeObserver(t){this.observers=this.observers.filter(s=>s!==t)}notifyObservers(t,s){this.observers.forEach(n=>{try{n(t,s)}catch(a){console.error("Error in performance observer:",a)}})}monitorPageLoad(){if(typeof window<"u"&&window.performance){const t=window.performance.getEntriesByType("navigation")[0];if(t){const s={domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,loadComplete:t.loadEventEnd-t.loadEventStart,totalLoadTime:t.loadEventEnd-t.navigationStart,domInteractive:t.domInteractive-t.navigationStart,firstPaint:this.getFirstPaint(),firstContentfulPaint:this.getFirstContentfulPaint()};return this.notifyObservers("page_load",s),s}}return null}getFirstPaint(){if(typeof window<"u"&&window.performance){const s=window.performance.getEntriesByType("paint").find(n=>n.name==="first-paint");return s?s.startTime:null}return null}getFirstContentfulPaint(){if(typeof window<"u"&&window.performance){const s=window.performance.getEntriesByType("paint").find(n=>n.name==="first-contentful-paint");return s?s.startTime:null}return null}getMemoryUsage(){return typeof window<"u"&&window.performance&&window.performance.memory?{usedJSHeapSize:window.performance.memory.usedJSHeapSize,totalJSHeapSize:window.performance.memory.totalJSHeapSize,jsHeapSizeLimit:window.performance.memory.jsHeapSizeLimit,memoryUsagePercentage:Math.round(window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit*100)}:null}generateReport(){const t=this.getPerformanceSummary(),s=this.getSlowOperations(),n=this.getMemoryUsage(),a=this.monitorPageLoad();return{timestamp:new Date().toISOString(),summary:t,slowOperations:s.slice(0,10),memoryUsage:n,pageLoadMetrics:a,recommendations:this.getRecommendations(t,s)}}getRecommendations(t,s){const n=[];return t.successRate<95&&n.push({type:"reliability",message:"Success rate is below 95%. Consider improving error handling and retry logic.",priority:"high"}),t.slowOperationRate>20&&n.push({type:"performance",message:"More than 20% of operations are slow. Consider optimization.",priority:"medium"}),t.averageResponseTime>3e3&&n.push({type:"performance",message:"Average response time is above 3 seconds. Consider caching and optimization.",priority:"high"}),s.some(a=>a.key.includes("database"))&&n.push({type:"database",message:"Database operations are slow. Consider query optimization and indexing.",priority:"medium"}),s.some(a=>a.key.includes("api"))&&n.push({type:"api",message:"API calls are slow. Consider caching, compression, and request optimization.",priority:"medium"}),n}}const ge=new ea,Ge=async(r,t,s={})=>ge.measureFunction(r,t,s),hr={bookContent:{minLength:0,maxLength:1e4,required:!0},audienceClass:{minLength:2,maxLength:100,required:!0,pattern:/^[a-zA-Z0-9\s\-.,()]+$/},audienceAge:{minLength:1,maxLength:50,required:!0,pattern:/^[a-zA-Z0-9\s\-,]+$/},audienceRegion:{minLength:2,maxLength:100,required:!0,pattern:/^[a-zA-Z\s\-.,()]+$/},outputWordCount:{min:50,max:5e3,required:!1,pattern:/^\d+$/},customInstructions:{minLength:0,maxLength:2e3,required:!1}},he={required:r=>"Please fill in this field",minLength:(r,t)=>`At least ${t} characters needed`,maxLength:(r,t)=>`Please keep under ${t} characters`,pattern:r=>"Please use only letters, numbers, and basic punctuation",min:(r,t)=>`Minimum value is ${t}`,max:(r,t)=>`Maximum value is ${t}`,invalidNumber:r=>"Please enter a valid number"},ta={bookContent:"Book Content",audienceClass:"Audience Class",audienceAge:"Audience Age",audienceRegion:"Audience Region",outputWordCount:"Output Word Count",customInstructions:"Custom Instructions"},pt=(r,t)=>{const s=hr[r],n=ta[r]||r;if(!s)return{isValid:!0,error:null};if(s.required&&(!t||t.trim()===""))return{isValid:!1,error:he.required(n)};if(!s.required&&(!t||t.trim()===""))return{isValid:!0,error:null};const a=t.trim();if(s.minLength&&a.length<s.minLength)return{isValid:!1,error:he.minLength(n,s.minLength)};if(s.maxLength&&a.length>s.maxLength)return{isValid:!1,error:he.maxLength(n,s.maxLength)};if(s.pattern&&!s.pattern.test(a))return{isValid:!1,error:he.pattern(n)};if(r==="outputWordCount"&&a!==""){const i=parseInt(a,10);if(isNaN(i))return{isValid:!1,error:he.invalidNumber(n)};if(s.min&&i<s.min)return{isValid:!1,error:he.min(n,s.min)};if(s.max&&i>s.max)return{isValid:!1,error:he.max(n,s.max)}}return{isValid:!0,error:null}},to=(r,t)=>{const n={1:["bookContent"],2:["audienceClass","audienceAge","audienceRegion"],3:["outputWordCount","customInstructions"],4:["bookContent","audienceClass","audienceAge","audienceRegion"]}[r]||[],a={};let i=!0;if(r===3){const l=t.outputWordCount&&t.outputWordCount.trim()!=="",u=t.customInstructions&&t.customInstructions.trim()!=="";n.forEach(c=>{const p=pt(c,t[c]||"");p.isValid||(a[c]=p.error,i=!1)}),i&&!l&&!u&&(i=!1)}else n.forEach(l=>{const u=pt(l,t[l]||"");u.isValid||(a[l]=u.error,i=!1)});return{isValid:i,errors:a,fieldsValidated:n}},ra=(r,t)=>{const s=hr[t];if(!s)return null;const n=r?r.length:0,a=r?r.trim().split(/\s+/).filter(u=>u.length>0).length:0;let i="normal",l="";return s.required&&n===0?(i="error",l="Required field"):s.minLength&&n<s.minLength?(i="warning",l=`${s.minLength-n} more characters needed`):s.maxLength&&n>s.maxLength?(i="error",l=`${n-s.maxLength} characters over limit`):n>0&&(i="success",l="Valid"),{charCount:n,wordCount:a,status:i,message:l,maxLength:s.maxLength,minLength:s.minLength}},lt=({fieldName:r,label:t,value:s,onChange:n,type:a="text",placeholder:i="",required:l=!1,disabled:u=!1,className:c="",rows:p=4,showCharCount:f=!1,showWordCount:h=!1,helpText:v="",icon:w=null,onValidation:C=null,showValidationErrors:k=!1})=>{const[j,O]=o.useState(""),[x,b]=o.useState(!1),[m,T]=o.useState(null);o.useEffect(()=>{const F=pt(r,s),K=ra(s,r),ye=k&&F.error;O(ye?F.error:""),T(K),C&&C(r,F.isValid,F.error)},[s,x,r,C,k]);const N=()=>{b(!0)},E=F=>{const K=F.target.value;n(K)},_=()=>j?"border-orange-300 focus:border-orange-400 focus:ring-orange-400/20":m?.status==="success"&&x?"border-green-300 focus:border-green-400 focus:ring-green-400/20":m?.status==="warning"?"border-amber-300 focus:border-amber-400 focus:ring-amber-400/20":"border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-400",P=()=>j&&r!=="audienceClass"&&r!=="audienceAge"?"text-orange-500":m?.status==="success"&&x?"text-green-500":m?.status==="warning"?"text-amber-500":"text-gray-400",y=`
    w-full px-3 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-white 
    rounded-lg transition-colors duration-200
    ${_()}
    ${u?"opacity-50 cursor-not-allowed":""}
    ${w?"pl-10":""}
    ${c}
  `,R=`input-${r}`,A=`error-${r}`,$=`help-${r}`,W=()=>a==="textarea"?e.jsx("textarea",{id:R,value:s,onChange:E,onBlur:N,placeholder:i,required:l,disabled:u,rows:p,className:`${y} resize-none`,"aria-describedby":`${j?A:""} ${v?$:""}`.trim(),"aria-invalid":!!j}):e.jsx("input",{id:R,type:a,value:s,onChange:E,onBlur:N,placeholder:i,required:l,disabled:u,className:y,"aria-describedby":`${j?A:""} ${v?$:""}`.trim(),"aria-invalid":!!j});return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{htmlFor:R,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[t,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[w&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("div",{className:`h-5 w-5 ${P()}`,children:w})}),W(),e.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:[j&&r!=="audienceClass"&&r!=="audienceAge"&&e.jsx(Cs,{className:"h-5 w-5 text-red-500"}),!j&&m?.status==="success"&&x&&e.jsx(Ss,{className:"h-5 w-5 text-green-500"}),!j&&m?.status==="warning"&&e.jsx(Ie,{className:"h-5 w-5 text-yellow-500"})]})]}),(f||h)&&m&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{children:[f&&e.jsxs("span",{className:m.charCount>(m.maxLength||1/0)?"text-red-500":"",children:[m.charCount,m.maxLength&&`/${m.maxLength}`," characters"]}),f&&h&&"  ",h&&e.jsxs("span",{children:[m.wordCount," words"]})]}),m.message&&e.jsx("span",{className:m.status==="error"?"text-red-500":m.status==="warning"?"text-yellow-500":m.status==="success"?"text-green-500":"text-gray-500",children:m.message})]}),j&&e.jsx("p",{id:A,className:"text-sm text-orange-600 dark:text-orange-400",role:"alert",children:j}),v&&!j&&e.jsx("p",{id:$,className:"text-sm text-gray-500 dark:text-gray-400",children:v})]})},sa=({email:r,onVerified:t,onBack:s,onError:n,onResendOTP:a})=>{const[i,l]=o.useState(["","","","","",""]),[u,c]=o.useState(!1),[p,f]=o.useState(300),[h,v]=o.useState(!1),[w,C]=o.useState(""),[k,j]=o.useState(3);o.useEffect(()=>{if(p>0){const N=setTimeout(()=>{f(p-1)},1e3);return()=>clearTimeout(N)}else v(!0)},[p]);const O=N=>{const E=Math.floor(N/60),_=N%60;return`${E}:${_.toString().padStart(2,"0")}`},x=o.useCallback((N,E)=>{if(E.length>1){const _=E.slice(0,6),P=[...i];for(let A=0;A<_.length&&A<6;A++)P[A]=_[A];l(P);const y=Math.min(_.length,5),R=document.querySelector(`input[name="otp-${y}"]`);R&&R.focus();return}if(E.match(/[0-9]/)){const _=[...i];if(_[N]=E,l(_),N<5){const P=document.querySelector(`input[name="otp-${N+1}"]`);P&&P.focus()}}},[i]),b=o.useCallback((N,E)=>{if(E.key==="Backspace"&&!i[N]&&N>0){const _=document.querySelector(`input[name="otp-${N-1}"]`);_&&_.focus()}},[i]),m=o.useCallback(async()=>{const N=i.join("");if(N.length!==6){n("Please enter the complete 6-digit code");return}c(!0),C("");try{const E=await Ge("otp_verification",async()=>await fetch("/.netlify/functions/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:N})}),{email:r}),_=await E.json();if(E.ok)C("Email verified successfully!"),t();else throw _.attemptsLeft!==void 0&&j(_.attemptsLeft),new Error(_.error||"Verification failed")}catch(E){const _=_e(E,"OTP Verification");n(_.message),l(["","","","","",""]);const P=document.querySelector('input[name="otp-0"]');P&&P.focus()}finally{c(!1)}},[i,r,t,n]),T=o.useCallback(async()=>{if(h){c(!0),C("");try{await a(),f(300),v(!1),j(3),l(["","","","","",""]),C("New verification code sent!");const N=document.querySelector('input[name="otp-0"]');N&&N.focus()}catch(N){const E=_e(N,"Resend OTP");n(E.message)}finally{c(!1)}}},[h,a,n]);return o.useEffect(()=>{i.every(N=>N!=="")&&!u&&m()},[i,u,m]),e.jsxs("div",{className:"w-full max-w-md mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700 animate-slide-up",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("button",{onClick:s,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors mb-4","aria-label":"Back to signup form",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to signup"]}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Verify Your Email"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"We've sent a 6-digit verification code to"}),e.jsx("p",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:r})]}),w&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:w})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-center space-x-3 mb-4",children:i.map((N,E)=>e.jsx("input",{type:"text",name:`otp-${E}`,maxLength:"1",value:N,onChange:_=>x(E,_.target.value),onKeyDown:_=>b(E,_),className:"w-12 h-12 text-center text-xl font-bold border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors",disabled:u,autoComplete:"off"},E))}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:p>0?`Expires in ${O(p)}`:"Code expired"}),e.jsxs("span",{children:[k," attempts left"]})]})]}),e.jsxs("button",{onClick:m,disabled:u||i.join("").length!==6,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl shadow-sm transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center mb-4",children:[u&&e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u?"Verifying...":"Verify Code"]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Didn't receive the code?"}),e.jsx("button",{onClick:T,disabled:!h||u,className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-semibold text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Resend Code":`Resend in ${O(p)}`})]})]})},na=({onAuthSuccess:r,onError:t,onBackToSocial:s})=>{const[n,a]=o.useState("signin"),[i,l]=o.useState(""),[u,c]=o.useState(""),[p,f]=o.useState(""),[h,v]=o.useState(!1),[w,C]=o.useState(""),k=o.useCallback(async b=>{v(!0),C("");try{if(Fe("Email",i,{required:!0,type:"email"}),Fe("Password",u,{required:!0,minLength:6}),b==="signup"&&(Fe("Confirm Password",p,{required:!0}),u!==p))throw new Error("Passwords do not match");const m=it(i),T=it(u);if(b==="signup"){try{await fetch("/.netlify/functions/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m})})}catch{throw new Error("Failed to send OTP. Please try again.")}a("otp");return}const N=await Ge(`auth_email_${b}`,async()=>b==="signin"?await Hn(m,T):await Jt(m,T),{type:b,email:m});b==="signup"&&C("Account created successfully! Please check your email for verification."),r(N)}catch(m){const T=_e(m,`Email Auth: ${b}`);t(T.message)}finally{v(!1)}},[i,u,p,r,t]),j=o.useCallback(async()=>{v(!0),C("");try{Fe("Email",i,{required:!0,type:"email"});const b=it(i);await Ge("auth_password_reset",async()=>await Vn(b),{email:b}),C("Password reset email sent! Check your inbox and follow the instructions."),setTimeout(()=>{a("signin"),C("")},3e3)}catch(b){const m=_e(b,"Password Reset");t(m.message)}finally{v(!1)}},[i,t]),O=o.useCallback(b=>{b.preventDefault(),n==="reset"?j():k(n)},[n,k,j]),x=o.useCallback((b,m)=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),a(m),C(""))},[]);return e.jsxs("div",{className:"w-full max-w-md mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700 animate-slide-up",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("button",{onClick:s,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors mb-4","aria-label":"Back to social login options",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to social login"]}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[n==="signin"&&"Sign In",n==="signup"&&"Create Account",n==="reset"&&"Reset Password"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[n==="signin"&&"Enter your email and password to continue",n==="signup"&&"Create a new account to get started",n==="reset"&&"Enter your email to receive reset instructions"]})]}),w&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:w})}),n==="otp"&&e.jsx(sa,{email:i,password:u,onVerified:async()=>{try{const b=await Jt(i,u);C("Account created successfully!"),r(b)}catch(b){t("Failed to create account: "+b.message)}},onBack:()=>a("signup"),onError:t,onResendOTP:async()=>{await fetch("/.netlify/functions/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})}}),n!=="otp"&&e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsx(lt,{fieldName:"email",label:"Email Address",type:"email",value:i,onChange:l,placeholder:"Enter your email address",required:!0,disabled:h,icon:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),n!=="reset"&&e.jsx(lt,{fieldName:"password",label:"Password",type:"password",value:u,onChange:c,placeholder:"Enter your password",required:!0,disabled:h,helpText:n==="signup"?"Password must be at least 6 characters":"",icon:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),n==="signup"&&e.jsx(lt,{fieldName:"confirmPassword",label:"Confirm Password",type:"password",value:p,onChange:f,placeholder:"Confirm your password",required:!0,disabled:h,helpText:"Re-enter your password to confirm",icon:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl shadow-sm transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:[h&&e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n==="signin"&&(h?"Signing In...":"Sign In"),n==="signup"&&(h?"Creating Account...":"Create Account"),n==="reset"&&(h?"Sending Reset Email...":"Send Reset Email")]})]}),n!=="otp"&&e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[n==="signin"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>a("reset"),onKeyDown:b=>x(b,"reset"),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,children:"Forgot your password?"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx("button",{type:"button",onClick:()=>a("signup"),onKeyDown:b=>x(b,"signup"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,children:"Sign up"})]})]}),n==="signup"&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>a("signin"),onKeyDown:b=>x(b,"signin"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,children:"Sign in"})]}),n==="reset"&&e.jsx("button",{type:"button",onClick:()=>a("signin"),onKeyDown:b=>x(b,"signin"),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,children:"Back to sign in"})]})]})},aa=({onAuthSuccess:r,onError:t})=>{const[s,n]=o.useState(!1),[a,i]=o.useState(null),[l,u]=o.useState("social"),c=o.useCallback(async p=>{n(!0),i(p);try{const f=await Ge(`auth_${p}`,async()=>{switch(p){case"google":return await Bn();default:throw new Error("Invalid provider")}},{provider:p});r(f)}catch(f){const h=_e(f,`Social Auth: ${p}`);t(h.message)}finally{n(!1),i(null)}},[r,t]);return l==="email"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4 font-sans animate-fade-in",children:e.jsx(na,{onAuthSuccess:r,onError:t,onBackToSocial:()=>u("social")})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4 font-sans animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 max-w-md w-full border border-gray-200 dark:border-gray-700 text-center animate-slide-up",children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-4",children:[e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent dark:from-blue-400 dark:to-purple-400",children:"ECC"})," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent dark:from-blue-400 dark:to-purple-400",children:"App"})]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-8",children:"Choose your preferred sign-in method to continue"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>c("google"),disabled:s,"aria-label":"Sign in with Google",className:"w-full bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold py-3 px-6 rounded-xl border border-gray-300 dark:border-gray-600 shadow-sm transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[a==="google"?e.jsx("div",{className:"mr-3",children:e.jsx(dn,{size:"sm"})}):e.jsxs("svg",{className:"h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or"})})]}),e.jsxs("button",{onClick:()=>u("email"),disabled:s,"aria-label":"Sign in with Email",className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold py-3 px-6 rounded-xl border border-gray-300 dark:border-gray-600 shadow-sm transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-gray-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[e.jsx("svg",{className:"h-5 w-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),"Continue with Email"]})]})]})})},oa=({size:r="sm",className:t="",position:s="top-right"})=>{const n={xs:"px-1.5 py-0.5 text-xs",sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"},a={"top-right":"absolute -top-2 -right-2 z-20","top-left":"absolute -top-2 -left-2 z-20","bottom-right":"absolute -bottom-2 -right-2 z-20","bottom-left":"absolute -bottom-2 -left-2 z-20",inline:"relative z-10"};return e.jsx("span",{className:`${a[s]} pro-gradient-primary text-white font-semibold rounded-full ${n[r]} ${t}`,title:"Pro Feature - Premium subscription required",children:"PRO"})},ia=({user:r,onNavigateToSettings:t,onLogout:s,onClose:n,triggerRef:a})=>{const i=o.useRef(null);o.useEffect(()=>{const c=p=>{i.current&&!i.current.contains(p.target)&&a.current&&!a.current.contains(p.target)&&n()};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n,a]);const l=c=>{t(c),n()},u=()=>{s(),n()};return e.jsxs("div",{ref:i,className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50 animate-fade-in",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[r?.photoURL?e.jsx("img",{src:r.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full"}):e.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:e.jsx(gt,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r?.displayName||"User"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r?.email})]})]})}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>l("profile"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 transition-colors",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:"My Profile"})]}),e.jsxs("button",{onClick:()=>l("advanced"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{children:"Advanced Settings"})]}),e.jsx(oa,{size:"xs",position:"inline"})]}),e.jsxs("button",{onClick:()=>l("preferences"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 transition-colors",children:[e.jsx(Ys,{className:"w-4 h-4"}),e.jsx("span",{children:"Preferences"})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),e.jsxs("button",{onClick:u,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center space-x-2 transition-colors",children:[e.jsx(Fs,{className:"w-4 h-4"}),e.jsx("span",{children:"Sign Out"})]})]})]})},la={SUPER_USER_EMAILS:["azkabloch786@gmail.com","azkabloch786@gmail.com".toLowerCase()]},gr=r=>r?la.SUPER_USER_EMAILS.includes(r.toLowerCase()):!1,me={ADVANCED:{name:"Advanced",displayName:"Advanced Mode",price:"Free",features:{CHAT_CREATION:{GENERAL_MODE_ONLY:!0,SUBJECT_SPECIFIC_CHATS:!1,UNLIMITED_GENERAL_CHATS:!0,MAX_DAILY_CHATS:0,AVAILABLE_SUBJECTS:["General"]},CHAT_ACCESS:{CAN_OPEN_ALL_CHATS:!1,CAN_OPEN_GENERAL_CHATS:!0,CAN_OPEN_SUBJECT_CHATS:!1,CAN_VIEW_CHAT_HISTORY:!0},FEATURES:{UNLIMITED_MESSAGING:!0,CONTENT_CARD_LINKING:!0,FILE_UPLOADS:!1,CHAT_LINKING:!1,ADVANCED_FEATURES:!1,UNLIMITED_CONTENT_GENERATION:!1,PREMIUM_TEMPLATES:!1,ADVANCED_PROMPTS:!1,BULK_GENERATION:!1,EXPORT_FORMATS:!1,PRIORITY_PROCESSING:!1,CUSTOM_PERSONAS:!1,ANALYTICS_DASHBOARD:!1},UI_RESTRICTIONS:{SHOW_SUBJECT_SELECTION:!1,SHOW_PREMIUM_FEATURES:!1,SHOW_UPGRADE_PROMPTS:!0,HIDE_DISABLED_SUBJECTS:!0}}},PRO:{name:"PRO",displayName:"PRO Mode",price:"$9.99/month",features:{CHAT_CREATION:{GENERAL_MODE_ONLY:!1,SUBJECT_SPECIFIC_CHATS:!0,UNLIMITED_GENERAL_CHATS:!0,MAX_DAILY_CHATS:25,AVAILABLE_SUBJECTS:["General","Mathematics","Science","Physics","Chemistry","History","Literature","Accounting & Finance"]},CHAT_ACCESS:{CAN_OPEN_ALL_CHATS:!0,CAN_OPEN_GENERAL_CHATS:!0,CAN_OPEN_SUBJECT_CHATS:!0,CAN_VIEW_CHAT_HISTORY:!0},FEATURES:{UNLIMITED_MESSAGING:!0,CONTENT_CARD_LINKING:!0,FILE_UPLOADS:!0,CHAT_LINKING:!0,ADVANCED_FEATURES:!0,UNLIMITED_CONTENT_GENERATION:!0,PREMIUM_TEMPLATES:!0,ADVANCED_PROMPTS:!0,BULK_GENERATION:!0,EXPORT_FORMATS:!0,PRIORITY_PROCESSING:!0,CUSTOM_PERSONAS:!0,ANALYTICS_DASHBOARD:!0},UI_RESTRICTIONS:{SHOW_SUBJECT_SELECTION:!0,SHOW_PREMIUM_FEATURES:!0,SHOW_UPGRADE_PROMPTS:!1,HIDE_DISABLED_SUBJECTS:!1}}}},mr=2,ca={"1_to_2":r=>({...r,version:2,metadata:{...r.metadata,schemaVersion:2,migrationDate:new Date().toISOString()}})};class ze{static migrateData(t,s=mr){let n={...t};const a=n.version||1;if(a>=s)return n;for(let i=a;i<s;i++){const l=`${i}_to_${i+1}`,u=ca[l];if(u)try{n=u(n),console.log(`Successfully migrated tier data from version ${i} to ${i+1}`)}catch(c){return console.error(`Migration failed from version ${i} to ${i+1}:`,c),t}else console.warn(`No migration function found for version ${i} to ${i+1}`)}return n}static validateDataStructure(t){if(!t||typeof t!="object")return!1;const s=["tier","setAt","metadata"];for(const n of s)if(!(n in t))return!1;return!!me[t.tier]}static createDataBackup(t){const s=`eccApp_userTier_backup_${Date.now()}`;try{return localStorage.setItem(s,JSON.stringify(t)),console.log(`Created backup at: ${s}`),s}catch(n){return console.error("Failed to create backup:",n),null}}static cleanupOldBackups(){const t=Date.now()-2592e6,s=[];for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);a&&a.startsWith("eccApp_userTier_backup_")&&parseInt(a.split("_").pop())<t&&s.push(a)}s.forEach(n=>{localStorage.removeItem(n),console.log(`Removed old backup: ${n}`)})}}class da{constructor(){this.storageKey="eccApp_userTier",this.defaultTier=me.ADVANCED,this.welcomeTrialDays=9,this.schemaVersion=mr,this.adminOverrideKey="eccApp_adminTierOverride",ze.cleanupOldBackups()}setUserTier(t,s={}){if(!t||typeof t!="string")return console.error("Invalid tier name:",t),!1;const n=t.toUpperCase(),a=Object.keys(me),i=a.find(u=>u===n);if(!i)return console.error("Invalid tier name:",t,"Valid tiers:",a),!1;const l={tier:i,setAt:new Date().toISOString(),version:this.schemaVersion,metadata:{...s,lastUpdated:new Date().toISOString(),schemaVersion:this.schemaVersion}};try{return localStorage.setItem(this.storageKey,JSON.stringify(l)),!0}catch(u){return console.error("Error saving tier data:",u),!1}}getTierMetadata(){const t=localStorage.getItem(this.storageKey);if(t)try{return JSON.parse(t).metadata||{}}catch{return{}}return{}}upgradeToPRO(){return this.setUserTier("PRO",{upgradeDate:new Date().toISOString(),source:"upgrade_action"})}downgradeToAdvanced(){return this.setUserTier("ADVANCED",{downgradeDate:new Date().toISOString(),source:"downgrade_action"})}canCreateChatWithSubject(t){return this.getCurrentTier().features.CHAT_CREATION.AVAILABLE_SUBJECTS.includes(t)}canOpenChatWithSubject(t){const s=this.getCurrentTier();return t==="General"?s.features.CHAT_ACCESS.CAN_OPEN_GENERAL_CHATS:s.features.CHAT_ACCESS.CAN_OPEN_SUBJECT_CHATS}getAvailableSubjects(){return this.getCurrentTier().features.CHAT_CREATION.AVAILABLE_SUBJECTS}canAccessFeature(t){return this.getCurrentTier().features.FEATURES[t]||!1}getTierDisplayInfo(){const t=this.getCurrentTier(),s=this.getTierMetadata();return{name:t.name,displayName:t.displayName,price:t.price,isPRO:this.isPROUser(),isAdvanced:this.isAdvancedUser(),features:t.features,metadata:s}}shouldShowUpgradePrompts(){return this.getCurrentTier().features.UI_RESTRICTIONS.SHOW_UPGRADE_PROMPTS}getRestrictionReason(t){return this.getCurrentTier().name==="PRO"?null:{create_subject_chat:"Subject-specific chats are available in PRO mode. Upgrade to access Mathematics, Science, History, and more!",open_subject_chat:"Opening subject-specific chats requires PRO mode. Upgrade to access all your chat history!",file_upload:"File uploads are available in PRO mode. Upgrade to share documents, images, and more!",chat_linking:"Chat linking is available in PRO mode. Upgrade to connect related conversations!",advanced_features:"Advanced features are available in PRO mode. Upgrade to unlock the full potential!",quiz_generation:"Interactive Quiz Generation is a PRO feature. Upgrade to create engaging assessments with multiple-choice questions and instant feedback!"}[t]||"This feature is available in PRO mode. Upgrade to unlock full access!"}initializeNewUser(){const t=new Date;return t.setDate(t.getDate()+this.welcomeTrialDays),this.setUserTier("PRO",{isWelcomeTrial:!0,trialStartDate:new Date().toISOString(),trialEndDate:t.toISOString(),trialDaysRemaining:this.welcomeTrialDays,source:"welcome_trial",requiresPaymentAfterTrial:!0})}isOnWelcomeTrial(){return this.getTierMetadata().isWelcomeTrial===!0}getTrialStatus(){const t=this.getTierMetadata();if(!t.isWelcomeTrial)return{isOnTrial:!1,isExpired:!1,daysRemaining:0,endDate:null};const s=new Date(t.trialEndDate),a=s-new Date,i=Math.ceil(a/(1e3*60*60*24)),l=a<=0;if(i!==t.trialDaysRemaining&&i>=0){const u={...t,trialDaysRemaining:Math.max(0,i),lastChecked:new Date().toISOString()};this.setUserTier(this.getCurrentTier().name,u)}return{isOnTrial:!0,isExpired:l,daysRemaining:Math.max(0,i),endDate:s.toISOString(),startDate:t.trialStartDate,lastChecked:new Date().toISOString()}}checkTrialExpiration(){const t=this.getTrialStatus();return t.isOnTrial&&t.isExpired?(this.downgradeToAdvanced(),{trialExpired:!0,downgradedToBasic:!0,message:"Your PRO welcome trial has expired. Please submit payment to continue with PRO features."}):{trialExpired:!1,downgradedToBasic:!1,message:null}}activatePROAfterPayment(){const t=this.getTierMetadata();return this.setUserTier("PRO",{...t,isWelcomeTrial:!1,paidSubscription:!0,paymentApprovalDate:new Date().toISOString(),source:"payment_approved"})}getEffectiveTier(){const t=this.getTrialStatus();return t.isOnTrial&&t.isExpired?me.ADVANCED:this.getCurrentTier()}getUserOnboardingInfo(){const t=this.getTrialStatus(),s=this.getTierMetadata();return{isNewUser:!s.setAt||new Date-new Date(s.setAt)<24*60*60*1e3,hasWelcomeTrial:t.isOnTrial,trialDaysRemaining:t.daysRemaining,needsPaymentSubmission:t.isExpired&&!s.paidSubscription,isWaitingForApproval:s.paymentSubmitted&&!s.paidSubscription}}setAdminTierOverride(t,s){if(s!=="azkabloch786@gmail.com")return console.error("Only super users can set tier overrides"),!1;const n=t.toUpperCase();if(!me[n])return console.error("Invalid tier name for override:",t),!1;const a={tier:n,setBy:s,setAt:new Date().toISOString(),active:!0};try{return localStorage.setItem(this.adminOverrideKey,JSON.stringify(a)),!0}catch(i){return console.error("Error setting admin tier override:",i),!1}}getAdminTierOverride(){const t=localStorage.getItem(this.adminOverrideKey);if(t)try{const s=JSON.parse(t);return s.active?s:null}catch(s){return console.error("Error parsing admin override data:",s),null}return null}clearAdminTierOverride(t){return t!=="azkabloch786@gmail.com"?(console.error("Only super users can clear tier overrides"),!1):(localStorage.removeItem(this.adminOverrideKey),!0)}isAdminUser(t){return t==="azkabloch786@gmail.com"}getCurrentTier(){const t=this.getAdminTierOverride();if(t)return me[t.tier]||this.defaultTier;const s=localStorage.getItem(this.storageKey);if(s)try{let n=JSON.parse(s);if(!n.version||n.version<this.schemaVersion)if(console.log("Migrating tier data from version",n.version||1,"to",this.schemaVersion),ze.createDataBackup(n),n=ze.migrateData(n,this.schemaVersion),ze.validateDataStructure(n))localStorage.setItem(this.storageKey,JSON.stringify(n)),console.log("Successfully migrated and saved tier data");else return console.error("Migration resulted in invalid data structure, using defaults"),this.defaultTier;return me[n.tier]||this.defaultTier}catch(n){return console.error("Error parsing user tier:",n),this.defaultTier}return this.defaultTier}isPROUser(){const t=this.getAdminTierOverride();return t?t.tier==="PRO":this.getEffectiveTier().name==="PRO"}isAdvancedUser(){const t=this.getAdminTierOverride();return t?t.tier==="ADVANCED":this.getCurrentTier().name==="Advanced"}getTierDisplayInfo(){const t=this.getAdminTierOverride(),s=this.getCurrentTier(),n=this.getTierMetadata();return{name:s.name,displayName:s.displayName,price:s.price,isPRO:this.isPROUser(),isAdvanced:this.isAdvancedUser(),features:s.features,metadata:n,adminOverride:t?{active:!0,setBy:t.setBy,setAt:t.setAt,tier:t.tier}:null}}resetToDefault(){localStorage.removeItem(this.storageKey),localStorage.removeItem(this.adminOverrideKey)}}const J=new da,ro=()=>J.isPROUser(),so=r=>J.getRestrictionReason(r),ua=({onTierChange:r,onNavigateToPurchase:t,userEmail:s})=>{const[n,a]=o.useState(!1),[i,l]=o.useState("Advanced"),[u,c]=o.useState(!1),p=o.useRef(null);o.useEffect(()=>{const k=J.getCurrentTier();l(k.name),s&&c(gr(s))},[s]),o.useEffect(()=>{const k=j=>{p.current&&!p.current.contains(j.target)&&a(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const f=k=>{u&&s?(l(k),J.setAdminTierOverride(k,s),r&&r(k)):k==="PRO"&&!J.isPROUser()?t&&t():(l(k),J.setUserTier(k),r&&r(k)),a(!1)},h=()=>{if(u&&s){J.clearAdminTierOverride(s);const k=J.getCurrentTier();l(k.name),r&&r(k.name)}a(!1)},v={Advanced:{gradient:"from-blue-500 to-cyan-600",icon:ht,description:"Free Learning Experience"},PRO:{gradient:"pro-gradient-primary",icon:Ht,description:"Enhanced Learning Experience"}},w=v[i]||v.Advanced,C=w.icon;return e.jsxs("div",{className:"relative",ref:p,children:[e.jsxs("button",{onClick:()=>a(!n),"aria-haspopup":"menu","aria-expanded":n,"aria-label":"Learning experience selector",className:`flex items-center space-x-2 px-3 py-2 ${w.gradient.startsWith("pro-")?w.gradient:`bg-gradient-to-r ${w.gradient}`} text-white text-sm font-semibold rounded-full shadow-md hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-opacity-50 focus:ring-purple-300`,children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:i==="PRO"?"PRO Learning":"Enhanced Learning"}),e.jsx(dt,{className:`w-4 h-4 transition-transform duration-200 ${n?"rotate-180":""}`})]}),n&&e.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide border-b border-gray-200 dark:border-gray-700",children:"Learning Experience"}),e.jsxs("button",{onClick:()=>f("Advanced"),className:`w-full px-4 py-3 text-left text-sm transition-colors duration-200 flex items-center space-x-3 ${i==="Advanced"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-cyan-600 flex items-center justify-center",children:e.jsx(ht,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Advanced"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Free Learning Experience"})]}),i==="Advanced"&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsxs("button",{onClick:()=>f("PRO"),className:`w-full px-4 py-3 text-left text-sm transition-colors duration-200 flex items-center space-x-3 ${i==="PRO"?"bg-violet-50 dark:bg-cyan-900/20 text-violet-600 dark:text-cyan-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full pro-gradient-primary flex items-center justify-center",children:e.jsx(Ht,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium flex items-center space-x-2",children:[e.jsx("span",{children:"PRO"}),e.jsx("span",{className:"text-xs pro-gradient-primary text-white px-1.5 py-0.5 rounded text-[10px] font-bold",children:"ENHANCED"})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Enhanced Learning Experience"})]}),i==="PRO"&&e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),e.jsxs("div",{className:"px-4 py-2 text-xs text-orange-600 dark:text-orange-400 font-medium uppercase tracking-wide flex items-center space-x-2",children:[e.jsx(ut,{className:"w-3 h-3"}),e.jsx("span",{children:"Admin Override"})]}),J.getAdminTierOverride()&&e.jsxs("div",{className:"px-4 py-2 text-xs text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 mx-2 rounded",children:[e.jsx("div",{className:"font-medium",children:"Override Active"}),e.jsx("div",{className:"text-orange-500 dark:text-orange-300",children:"Admin privileges enabled"})]}),e.jsxs("button",{onClick:h,className:"w-full px-4 py-3 text-left text-sm transition-colors duration-200 flex items-center space-x-3 text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-orange-500 to-red-600 flex items-center justify-center",children:e.jsx(ut,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Clear Override"}),e.jsx("div",{className:"text-xs text-orange-500 dark:text-orange-300",children:"Return to normal tier"})]})]})]})]})})]})},ha=({currentPage:r,setCurrentPage:t,currentSettingsPage:s,theme:n,setTheme:a,user:i,onLogout:l,onNavigateToSettings:u,isVoiceListening:c,onVoiceToggle:p,isVoiceSupported:f,voiceError:h})=>{const[v,w]=o.useState(!1),[C,k]=o.useState(!1),[j,O]=o.useState("Advanced"),x=o.useRef(null),b=o.useRef(null),m=o.useCallback(()=>{a(n==="light"?"dark":"light")},[n,a]),T=o.useCallback(()=>{w(!v)},[v]),N=o.useCallback(()=>{k(!C)},[C]),E=o.useCallback(y=>{O(y),k(!1),console.log(`Admin mode changed to: ${y}`)},[]),_=o.useCallback(()=>{t("generation"),w(!1),console.log("Home/Branding clicked - navigating to Content Generation")},[t]),P=o.useCallback(y=>{t(y),w(!1),console.log(`Navigating to ${y}`)},[t]);return e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700 fixed top-0 left-0 right-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center cursor-pointer group transition-all duration-200 ease-in-out hover:scale-[1.02] outline-none focus:outline-none branding-button",onClick:_,role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(_(),y.target.blur())},"aria-label":"ECC - Educational Content Creator - Home",style:{outline:"none"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg group-hover:shadow-lg transition-all duration-200 transform group-hover:scale-[1.05]",style:{background:"linear-gradient(135deg, hsl(217, 91%, 60%) 0%, hsl(262, 83%, 58%) 100%)",boxShadow:"0 8px 25px rgba(59, 130, 246, 0.3), 0 4px 10px rgba(139, 92, 246, 0.2)"},children:e.jsx(or,{size:28,className:"text-white drop-shadow-sm"})}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-blue-500/10 to-purple-600/10 blur-lg scale-110 opacity-0 group-hover:opacity-50 transition-opacity duration-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent dark:from-blue-400 dark:to-purple-400 leading-tight",children:"ECC"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium tracking-wide uppercase opacity-80",children:"Educational Content Creator"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("nav",{className:"flex items-center space-x-2",role:"navigation","aria-label":"Main navigation",children:e.jsx("button",{onClick:()=>{P(r==="generation"?"history":"generation")},"aria-current":(r==="generation"||r==="history")&&!s?"page":void 0,"aria-label":`Navigate to ${r==="generation"?"Content History":"Content Generation"}`,className:`flex items-center space-x-2 px-4 py-2 rounded-full font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-opacity-50 ${(r==="generation"||r==="history")&&!s?r==="generation"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg transform scale-105 focus:ring-purple-300":"bg-gradient-to-r from-green-600 to-blue-600 text-white shadow-lg transform scale-105 focus:ring-blue-300":"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-md hover:from-blue-600 hover:to-purple-600 hover:shadow-lg hover:scale-105 focus:ring-purple-300"}`,children:r==="generation"?"Content History":"Content Generation"})}),f&&e.jsx("div",{className:"relative",children:e.jsx("button",{onClick:p,className:`flex items-center space-x-2 px-4 py-2 rounded-full font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-opacity-50 ${c?"pro-gradient-primary text-white shadow-lg transform scale-105 ring-2 ring-violet-400/50 focus:ring-violet-300":"pro-gradient-secondary text-white shadow-md hover:shadow-lg hover:scale-105 ring-1 ring-violet-400/30 focus:ring-violet-300"}`,"aria-label":c?"Stop voice control":"Start voice control",title:h||(c?"Listening... Click to stop":"Click to start voice control"),children:c?e.jsx(Vs,{className:"w-4 h-4"}):e.jsx(Bs,{className:"w-4 h-4"})})}),e.jsx("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 rounded-full font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-opacity-50 bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-md hover:from-gray-600 hover:to-gray-700 hover:shadow-lg hover:scale-105 focus:ring-gray-300","aria-label":`Switch to ${n==="light"?"dark":"light"} mode`,role:"switch","aria-checked":n==="dark",children:n==="light"?e.jsx(qs,{className:"w-4 h-4"}):e.jsx(tn,{className:"w-4 h-4"})}),e.jsx(ua,{onTierChange:y=>{console.log(`Learning experience changed to: ${y}`)},onNavigateToPurchase:()=>{t("purchase")}}),i?.email&&gr(i.email)&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:b,onClick:N,"aria-haspopup":"menu","aria-expanded":C,"aria-label":"Admin mode selector",className:"flex items-center space-x-1 px-3 py-1 bg-gradient-to-r from-red-500 to-orange-500 text-white text-xs font-semibold rounded-full shadow-md hover:from-red-600 hover:to-orange-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-300",children:[e.jsx(ht,{className:"w-3 h-3"}),e.jsx("span",{children:"Admin"}),e.jsx(dt,{className:"w-3 h-3"})]}),C&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wide border-b border-gray-200 dark:border-gray-700",children:"Admin Mode"}),e.jsxs("button",{onClick:()=>E("Advanced"),className:`w-full px-4 py-2 text-left text-sm transition-colors duration-200 flex items-center space-x-2 ${j==="Advanced"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${j==="Advanced"?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Advanced"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Non-pro user access"})]})]}),e.jsxs("button",{onClick:()=>E("PRO"),className:`w-full px-4 py-2 text-left text-sm transition-colors duration-200 flex items-center space-x-2 ${j==="PRO"?"bg-violet-50 dark:bg-violet-900/20 text-violet-600 dark:text-violet-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${j==="PRO"?"bg-violet-500":"bg-gray-300 dark:bg-gray-600"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center space-x-1",children:[e.jsx("span",{children:"PRO"}),e.jsx("span",{className:"text-xs pro-gradient-primary text-white px-1 py-0.5 rounded text-[10px] font-bold",children:"PRO"})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Full pro features access"})]})]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:x,onClick:T,"aria-haspopup":"menu","aria-expanded":v,"aria-label":"User menu",className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[i?.photoURL?e.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full"}):e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:e.jsx(gt,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),e.jsx(dt,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})]}),v&&e.jsx(ia,{user:i,onNavigateToSettings:u,onLogout:l,onClose:()=>w(!1),triggerRef:x})]})]})]})})})},ga=X.memo(ha),Te=X.memo(({message:r,type:t="success",duration:s=5e3,title:n,onClose:a,onConfirm:i,onCancel:l,confirmText:u="Confirm",cancelText:c="Cancel",confirmButtonClass:p="",isLoading:f=!1,persistent:h=!1,position:v="default",displayPosition:w,stackIndex:C=0})=>{const[k,j]=o.useState(!1),[O,x]=o.useState(!1),b=o.useCallback(()=>{x(!0),setTimeout(()=>{j(!1),a&&a()},300)},[a]);if(o.useEffect(()=>{if(r&&(j(!0),x(!1),t!=="confirmation"&&!h&&s>0)){const y=setTimeout(()=>{b()},s);return()=>clearTimeout(y)}},[r,t,s,h,b]),o.useEffect(()=>{const y=R=>{R.key==="Escape"&&a&&b()};if(k)return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[k,a,b]),!r||!k)return null;const m=t==="confirmation",T=()=>{switch(t){case"success":return"bg-green-100 border-green-400 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300";case"error":return"bg-red-100 border-red-400 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300";case"info":return"bg-blue-100 border-blue-400 text-blue-700 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300";case"warning":return"bg-yellow-100 border-yellow-400 text-yellow-700 dark:bg-yellow-900/20 dark:border-yellow-800 dark:text-yellow-300";case"confirmation":return"bg-white border-gray-300 text-gray-900 dark:bg-gray-800 dark:border-gray-600 dark:text-white";default:return"bg-gray-100 border-gray-400 text-gray-700 dark:bg-gray-900/20 dark:border-gray-800 dark:text-gray-300"}},N=()=>{switch(t){case"success":return e.jsxs("div",{className:"flex items-center mr-2 flex-shrink-0",children:[e.jsx("span",{className:"text-lg mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]});case"error":return e.jsxs("div",{className:"flex items-center mr-2 flex-shrink-0",children:[e.jsx("span",{className:"text-lg mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})]});case"info":return e.jsxs("div",{className:"flex items-center mr-2 flex-shrink-0",children:[e.jsx("span",{className:"text-lg mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]});case"warning":return e.jsxs("div",{className:"flex items-center mr-2 flex-shrink-0",children:[e.jsx("span",{className:"text-lg mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})]});case"confirmation":return e.jsxs("div",{className:"flex items-center mr-2 flex-shrink-0",children:[e.jsx("span",{className:"text-lg mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]});default:return e.jsx("div",{className:"flex items-center mr-2 flex-shrink-0",children:e.jsx("span",{className:"text-lg mr-1",children:""})})}},E=()=>{switch(t){case"success":return"Success!";case"error":return"Error!";case"info":return"Information";case"warning":return"Warning!";case"confirmation":return"Confirm Action";default:return"Notification"}},_=()=>{const y="fixed right-4 transition-all duration-300 ease-out";if(w){const R=w.zIndex||1e3-C;return`${y} z-[${R}]`}switch(v){case"top":return`${y} top-32 z-50`;case"center":return`${y} top-1/2 -translate-y-1/2 z-50`;default:return`${y} top-20 z-50`}},P=()=>w?{top:`${w.offsetY||20}px`}:{};return e.jsx("div",{className:`${_()} ${O?"animate-slide-out-right opacity-0 scale-95":"animate-slide-in-right"}`,style:P(),children:e.jsxs("div",{className:`border px-4 py-3 rounded-lg shadow-lg ${T()} ${v==="center"?"max-w-sm w-80":""}`,children:[(n||m)&&e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[N(),e.jsx("h3",{className:"text-sm font-semibold",children:n||E()})]}),a&&e.jsx("button",{onClick:b,className:"ml-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors","aria-label":"Close notification",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),!n&&!m&&e.jsxs("div",{className:"flex items-center",children:[N(),e.jsx("span",{className:"text-sm font-medium",children:r}),a&&e.jsx("button",{onClick:b,className:"ml-auto text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors","aria-label":"Close notification",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(n||m)&&e.jsx("div",{children:e.jsx("p",{className:"text-sm leading-relaxed",children:r})}),m&&e.jsxs("div",{className:"flex space-x-3 justify-end mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("button",{onClick:l||b,disabled:f,className:"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c}),e.jsxs("button",{onClick:i,disabled:f,className:`px-4 py-2 text-sm text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center ${p||"bg-blue-600 hover:bg-blue-700"}`,children:[f&&e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u]})]}),m&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-center",children:"Press ESC to cancel"})})]})})});Te.displayName="ToastNotification";const ma=()=>{const[r,t]=o.useState(!1),[s,n]=o.useState(""),[a,i]=o.useState(""),[l,u]=o.useState(!1),c=o.useRef(null),p=o.useRef(!1),f=o.useRef(null),h=o.useRef(null);o.useEffect(()=>{const C=window.SpeechRecognition||window.webkitSpeechRecognition;if(C){u(!0);const k=new C;k.continuous=!0,k.interimResults=!0,k.lang="en-US",k.maxAlternatives=1;const j=()=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{c.current&&r&&(console.log("Auto-off: Voice recognition stopped after 3.5 minutes of inactivity"),p.current=!0,c.current.stop(),i("Voice control automatically turned off after 3.5 minutes of inactivity."))},21e4)};k.onstart=()=>{t(!0),i(""),p.current=!1,console.log("Voice recognition started"),j()},k.onresult=O=>{const x=O.results[O.results.length-1];if(x.isFinal){const b=x[0].transcript.trim();if(console.log("Voice command recognized:",b),b.toLowerCase().includes("quit listening")){console.log("Quit Listening command detected - stopping voice recognition"),p.current=!0,c.current.stop(),i("Voice control stopped by voice command.");return}n(b),j()}},k.onerror=O=>{let x="Speech recognition error";switch(O.error){case"no-speech":x="No speech detected. Please try again.";break;case"audio-capture":x="No microphone found. Please check your microphone.";break;case"not-allowed":x="Microphone access denied. Please allow microphone access.";break;case"network":x="Network error occurred. Please check your connection.";break;case"aborted":x="Speech recognition was aborted.";break;default:x=`Speech recognition error: ${O.error}`}i(x),t(!1),console.error("Speech recognition error:",O.error)},k.onend=()=>{if(t(!1),console.log("Voice recognition ended"),!p.current)try{setTimeout(()=>{c.current&&c.current.start()},100)}catch(O){console.error("Error restarting speech recognition:",O)}},c.current=k}else u(!1),i("Speech recognition is not supported in this browser. Please use Chrome, Edge, or Safari.");return()=>{f.current&&clearTimeout(f.current),h.current&&clearTimeout(h.current),c.current&&c.current.stop()}},[]);const v=o.useCallback(()=>{if(!l){i("Speech recognition is not supported in this browser.");return}if(!c.current){i("Speech recognition is not initialized.");return}if(!r)try{i(""),n(""),c.current.start()}catch(C){console.error("Error starting speech recognition:",C),i("Failed to start voice recognition. Please try again.")}},[l,r]),w=o.useCallback(()=>{c.current&&r&&(p.current=!0,c.current.stop()),h.current&&(clearTimeout(h.current),h.current=null)},[r]);return o.useEffect(()=>{if(s){const C=setTimeout(()=>{n("")},3e3);return()=>clearTimeout(C)}},[s]),{isListening:r,transcript:s,error:a,isSupported:l,startListening:v,stopListening:w}},pa=({message:r,type:t="success",duration:s=2e3})=>{const[n,a]=o.useState(!1);if(o.useEffect(()=>{if(r){a(!0);const u=setTimeout(()=>{a(!1)},s);return()=>clearTimeout(u)}},[r,s]),!r||!n)return null;const i=()=>{switch(t){case"success":return"bg-green-100 border-green-400 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300";case"error":return"bg-red-100 border-red-400 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300";case"info":return"bg-blue-100 border-blue-400 text-blue-700 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300";default:return"bg-gray-100 border-gray-400 text-gray-700 dark:bg-gray-900/20 dark:border-gray-800 dark:text-gray-300"}},l=()=>{switch(t){case"success":return e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("span",{className:"text-sm mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]});case"error":return e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("span",{className:"text-sm mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})]});case"info":return e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("span",{className:"text-sm mr-1",children:""}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v-3m-4.5 0h9M19 11A7 7 0 1110.05 4"})})]});default:return e.jsx("div",{className:"flex items-center mr-2",children:e.jsx("span",{className:"text-sm mr-1",children:""})})}};return e.jsx("div",{className:"fixed top-20 right-4 z-50 animate-fade-in",children:e.jsxs("div",{className:`border px-4 py-3 rounded-lg shadow-lg flex items-center ${i()}`,children:[l(),e.jsx("span",{className:"text-sm font-medium",children:r})]})})},se={CRITICAL:"CRITICAL",HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW"},q={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info",ACHIEVEMENT:"achievement",FEATURE_HIGHLIGHT:"feature_highlight"},ie={CONTENT_OPERATIONS:"content_operations",TIER_MANAGEMENT:"tier_management",ONBOARDING:"onboarding"},fe={GLOBAL:"global",CONTENT_GENERATION:"content_generation"},pe={MILESTONE:"milestone",ACHIEVEMENT:"achievement",PROGRESS:"progress",SUBTLE:"subtle"},le={OFF:"off",CRITICAL_ONLY:"critical_only"};class fa{constructor(){this.notifications=new Map,this.currentContext=fe.GLOBAL,this.startTime=Date.now(),this.preferences={soundEnabled:!1,autoDismiss:!0,maxNotifications:5,enabledTypes:{success:!0,error:!0,warning:!0,info:!0,achievement:!0},celebrationLevel:pe.ACHIEVEMENT,reducedMotion:!1},console.log("NotificationService: Initialized for content creation (chat features disabled)")}show(t){const{message:s,type:n=q.INFO}=t;return console.log(`Notification: ${n.toUpperCase()} - ${s}`),this.preferences.enabledTypes[n]?this.createContentNotification(t):null}createContentNotification(t){const s=`notification_${Date.now()}`,n={id:s,...t,timestamp:new Date,priority:this.determinePriority(t),category:ie.CONTENT_OPERATIONS};return this.notifications.set(s,n),s}determinePriority(t){const{type:s,metadata:n={}}=t;return s===q.ERROR&&n.isBlocking?se.CRITICAL:s===q.WARNING&&n.requiresAction?se.HIGH:s===q.SUCCESS||s===q.INFO?se.MEDIUM:se.LOW}processNotification(t){const s=this.createContentNotification(t);return this.notifications.get(s)}getActiveNotifications(){return Array.from(this.notifications.values()).filter(t=>!t.dismissed)}removeNotification(t){this.notifications.delete(t)}updateCurrentContext(t){this.currentContext=t}setDndMode(t){this.dndMode=t,console.log(`DND mode set to: ${t}`)}setQuietHours(t,s){this.quietHours={start:t,end:s},console.log(`Quiet hours set to: ${t} - ${s}`)}dismiss(t){this.notifications.delete(t)}clear(){this.notifications.clear()}clearAll(){this.notifications.clear()}getNotifications(){return Array.from(this.notifications.values())}getStats(){const t=this.getNotifications(),s=new Date,n=new Date(s.getTime()-60*60*1e3);return{total:t.length,active:t.filter(a=>!a.dismissed).length,byPriority:{critical:t.filter(a=>a.priority===se.CRITICAL).length,high:t.filter(a=>a.priority===se.HIGH).length,medium:t.filter(a=>a.priority===se.MEDIUM).length,low:t.filter(a=>a.priority===se.LOW).length},byType:{success:t.filter(a=>a.type===q.SUCCESS).length,error:t.filter(a=>a.type===q.ERROR).length,warning:t.filter(a=>a.type===q.WARNING).length,info:t.filter(a=>a.type===q.INFO).length},recentActivity:t.filter(a=>new Date(a.timestamp)>n).length,serviceUptime:Date.now()-this.startTime}}getMetrics(){return this.getStats()}}const H=new fa;class xa{constructor(){this.onboardingQueue=[],this.completedSteps=new Set,this.currentStep=null,this.isActive=!1,this.userProgress={},this.sessionStartTime=Date.now(),this.lastInteractionTime=Date.now(),this.interactionTimeout=null,this.stepDelay=3e3,this.maxStepsPerSession=5,this.stepsShownInSession=0}initialize(t,s={}){this.userId=t,this.userProfile=s,this.loadProgress(),this.setupDefaultOnboardingFlow(),this.completedSteps.size===0&&this.startOnboarding()}setupDefaultOnboardingFlow(){const t=[{id:"welcome",type:q.ACHIEVEMENT,category:ie.ONBOARDING,title:" Welcome to ECC!",message:"Let's get you started with a quick tour of the key features.",targetContext:"global",priority:"HIGH",actions:[{label:"Start Tour",handler:()=>this.nextStep(),primary:!0},{label:"Skip",handler:()=>this.skipOnboarding()}],triggers:["app_first_load"],delay:1e3},{id:"content_generation",type:q.FEATURE_HIGHLIGHT,category:ie.ONBOARDING,title:" Content Generation",message:"Create educational content by filling out the form below. Start with your book content and target audience.",targetContext:"generation",targetSelector:"#content-form",position:"inline",actions:[{label:"Got it!",handler:()=>this.completeStep("content_generation"),primary:!0}],triggers:["page_generation"],prerequisite:"welcome",delay:2e3},{id:"subject_selection",type:q.FEATURE_HIGHLIGHT,category:ie.ONBOARDING,title:" Subject Selection",message:"Choose your subject to get more targeted content generation.",targetContext:"generation",targetSelector:'[data-testid="subject-selector"]',position:"inline",actions:[{label:"Understood",handler:()=>this.completeStep("subject_selection"),primary:!0}],triggers:["form_focus"],prerequisite:"content_generation",delay:1e3},{id:"pro_features",type:q.FEATURE_HIGHLIGHT,category:ie.TIER_MANAGEMENT,title:" PRO Features",message:"You have access to PRO features during your trial! Try advanced personas and longer outputs.",targetContext:"generation",targetSelector:'[data-testid="pro-badge"]',position:"inline",actions:[{label:"Explore PRO",handler:()=>this.completeStep("pro_features"),primary:!0}],triggers:["pro_tier_active"],prerequisite:"subject_selection",delay:2e3},{id:"content_history",type:q.FEATURE_HIGHLIGHT,category:ie.ONBOARDING,title:" Content History",message:"Access your previously generated content anytime from the History tab.",targetContext:"global",targetSelector:'[data-tab="history"]',position:"inline",actions:[{label:"Check it out",handler:()=>this.completeStep("content_history"),primary:!0}],triggers:["content_generated"],prerequisite:"pro_features",delay:3e3},{id:"chat_feature",type:q.FEATURE_HIGHLIGHT,category:ie.ONBOARDING,title:" Magic Discussion",message:"Discuss your content with AI! Link any content to start a conversation.",targetContext:"global",targetSelector:'[data-tab="chat"]',position:"inline",actions:[{label:"Try it now",handler:()=>this.completeStep("chat_feature"),primary:!0}],triggers:["history_viewed"],prerequisite:"content_history",delay:2e3},{id:"voice_control",type:q.FEATURE_HIGHLIGHT,category:ie.ONBOARDING,title:" Voice Control",message:"Use voice commands to navigate! Click the microphone icon to get started.",targetContext:"global",targetSelector:'[data-testid="voice-toggle"]',position:"inline",actions:[{label:"Cool!",handler:()=>this.completeStep("voice_control"),primary:!0}],triggers:["navigation_completed"],prerequisite:"chat_feature",delay:1500},{id:"completion",type:q.ACHIEVEMENT,category:ie.ONBOARDING,title:" Onboarding Complete!",message:"You're all set! Explore ECC and create amazing educational content.",targetContext:"global",actions:[{label:"Start Creating",handler:()=>this.completeOnboarding(),primary:!0}],triggers:["all_steps_completed"],prerequisite:"voice_control",delay:1e3}];this.onboardingQueue=t.filter(s=>!this.completedSteps.has(s.id))}startOnboarding(){this.isActive=!0,this.stepsShownInSession=0,console.log(" Starting progressive onboarding"),this.processNextStep()}processNextStep(){if(!this.isActive||this.stepsShownInSession>=this.maxStepsPerSession)return;const t=this.findNextEligibleStep();if(!t){console.log(" No more onboarding steps available");return}this.currentStep=t,this.showStep(t)}findNextEligibleStep(){return this.onboardingQueue.find(t=>!(this.completedSteps.has(t.id)||t.prerequisite&&!this.completedSteps.has(t.prerequisite)||t.targetContext&&t.targetContext!==this.currentContext))}showStep(t){console.log(` Showing onboarding step: ${t.id}`);const s={...t,metadata:{isOnboarding:!0,stepId:t.id,sessionStep:this.stepsShownInSession+1}};t.actions&&(s.actions=t.actions.map(n=>({...n,handler:()=>{n.handler(),this.updateLastInteraction()}}))),setTimeout(()=>{H.processNotification(s),this.stepsShownInSession++,this.updateLastInteraction()},t.delay||0)}completeStep(t){console.log(` Completing onboarding step: ${t}`),this.completedSteps.add(t),this.currentStep=null,this.saveProgress(),setTimeout(()=>{this.processNextStep()},this.stepDelay)}skipStep(){this.currentStep&&this.completeStep(this.currentStep.id)}skipOnboarding(){console.log(" Skipping onboarding process"),this.isActive=!1,this.currentStep=null,this.onboardingQueue.forEach(t=>{this.completedSteps.add(t.id)}),this.saveProgress(),H.processNotification({type:q.INFO,category:ie.ONBOARDING,message:"Onboarding skipped. You can access help anytime from the menu.",duration:3e3})}completeOnboarding(){console.log(" Onboarding process completed"),this.isActive=!1,this.currentStep=null,this.completedSteps.add("onboarding_complete"),this.saveProgress(),this.trackOnboardingCompletion()}triggerStep(t,s={}){if(!this.isActive)return;console.log(` Onboarding trigger: ${t}`),this.currentContext=s.currentContext||this.currentContext;const n=this.onboardingQueue.filter(a=>a.triggers&&a.triggers.includes(t)&&!this.completedSteps.has(a.id));if(n.length>0){const a=n[0];this.isStepEligible(a)&&this.showStep(a)}}isStepEligible(t){return!(t.prerequisite&&!this.completedSteps.has(t.prerequisite)||this.stepsShownInSession>=this.maxStepsPerSession||Date.now()-this.lastInteractionTime<2e3)}updateLastInteraction(){this.lastInteractionTime=Date.now(),this.interactionTimeout&&clearTimeout(this.interactionTimeout),this.interactionTimeout=setTimeout(()=>{this.pauseOnboarding()},3e4)}pauseOnboarding(){console.log(" Pausing onboarding due to inactivity"),this.isActive=!1}resumeOnboarding(){console.log(" Resuming onboarding"),this.isActive=!0,this.updateLastInteraction()}updateContext(t){this.currentContext=t,this.triggerStep(`page_${t}`,{currentContext:t})}saveProgress(){const t={completedSteps:Array.from(this.completedSteps),userProgress:this.userProgress,sessionStartTime:this.sessionStartTime,lastUpdated:Date.now()};localStorage.setItem(`onboarding_progress_${this.userId}`,JSON.stringify(t))}loadProgress(){const t=localStorage.getItem(`onboarding_progress_${this.userId}`);if(t)try{const s=JSON.parse(t);this.completedSteps=new Set(s.completedSteps||[]),this.userProgress=s.userProgress||{},this.sessionStartTime=s.sessionStartTime||Date.now()}catch(s){console.error(" Error loading onboarding progress:",s)}}trackOnboardingCompletion(){const t={userId:this.userId,completedSteps:Array.from(this.completedSteps),totalDuration:Date.now()-this.sessionStartTime,stepsShown:this.stepsShownInSession,completedAt:new Date().toISOString()};console.log(" Onboarding completion tracked:",t)}getStats(){return{isActive:this.isActive,currentStep:this.currentStep?.id,completedSteps:Array.from(this.completedSteps),totalSteps:this.onboardingQueue.length,stepsShownInSession:this.stepsShownInSession,progress:Math.round(this.completedSteps.size/this.onboardingQueue.length*100)}}reset(){this.completedSteps.clear(),this.currentStep=null,this.isActive=!1,this.stepsShownInSession=0,this.userProgress={},this.sessionStartTime=Date.now(),this.userId&&localStorage.removeItem(`onboarding_progress_${this.userId}`),console.log(" Onboarding reset")}}const Ve=new xa;if(!X||typeof X.useState!="function")throw console.error("React is not properly loaded in useNotificationManager"),new Error("React hooks are not available - React may not be properly initialized");const ya=5,ba=10,va=(r={})=>{const{maxNotifications:t=ya,enableKeyboardNavigation:s=!0,enableSounds:n=!1,defaultContext:a=fe.GLOBAL,initialDndMode:i=le.OFF,quietHours:l={start:"22:00",end:"08:00"}}=r,[u,c]=o.useState(i),[p,f]=o.useState(l),[h,v]=o.useState([]),[w,C]=o.useState([]),[k,j]=o.useState(a),[O,x]=o.useState(!1),[b,m]=o.useState({totalShown:0,totalDismissed:0,averageDisplayTime:0,lastUpdateTime:Date.now()}),T=o.useRef(new Map),N=o.useRef(new Map),E=o.useRef(null),_=o.useRef(Date.now()),P=o.useCallback(()=>{if(O)return;x(!0);const I=H.getActiveNotifications(),z=I.slice(0,t).map((B,ne)=>{const ue=B.position?.offsetY||20,ee=ne*(60+ba);return{...B,displayPosition:{...B.position,offsetY:ue+ee,zIndex:1e3-ne},stackIndex:ne}});v(z),C(I.slice(t)),x(!1),m(B=>({...B,totalShown:B.totalShown+z.length,lastUpdateTime:Date.now()}))},[t,O]),y=o.useCallback(I=>{const S=T.current.get(I);S&&(clearTimeout(S),T.current.delete(I));const z=N.current.get(I);z&&(cancelAnimationFrame(z),N.current.delete(I)),H.removeNotification(I),m(B=>({...B,totalDismissed:B.totalDismissed+1})),P()},[P]),R=o.useCallback((I,S)=>{if(n)try{E.current||(E.current=new(window.AudioContext||window.webkitAudioContext));const z=E.current,B=z.createOscillator(),ne=z.createGain();B.connect(ne),ne.connect(z.destination);const ue={success:800,error:400,warning:600,info:500,achievement:1e3};B.frequency.value=ue[I]||500,B.type="sine";const ee={[se.CRITICAL]:.8,[se.HIGH]:.6,[se.MEDIUM]:.4,[se.LOW]:.2};ne.gain.value=ee[S]||.4,B.start(),B.stop(z.currentTime+.2)}catch(z){console.warn("Could not play notification sound:",z)}},[n]),A=o.useCallback(I=>{const S=H.processNotification({...I,context:k});if(S.duration>0){const z=setTimeout(()=>{const B=T.current.get(S.id);B&&(clearTimeout(B),T.current.delete(S.id));const ne=N.current.get(S.id);ne&&(cancelAnimationFrame(ne),N.current.delete(S.id)),H.removeNotification(S.id),m(ue=>({...ue,totalDismissed:ue.totalDismissed+1})),P()},S.duration);T.current.set(S.id,z)}return n&&R(S.type,S.priority),P(),S},[k,n,P,R]),$=o.useCallback(I=>{j(I),_.current=Date.now(),H.updateCurrentContext(I),setTimeout(P,50)},[P]),W=o.useCallback(I=>{c(I),H.setDndMode(I),console.log(`DND mode updated to: ${I}`)},[]),F=o.useCallback((I,S)=>{f({start:I,end:S}),H.setQuietHours(I,S),console.log(`Quiet hours updated to: ${I} - ${S}`)},[]),K=o.useCallback(()=>{T.current.forEach(I=>clearTimeout(I)),T.current.clear(),N.current.forEach(I=>cancelAnimationFrame(I)),N.current.clear(),H.clearAll(),v([]),C([]),m(I=>({...I,totalDismissed:I.totalDismissed+h.length}))},[h.length]);o.useEffect(()=>{if(!s)return;const I=S=>{if(h.length!==0)switch(S.key){case"Escape":h.length>0&&y(h[0].id);break;case"Enter":if(h.length>0&&h[0].actions?.length>0){const z=h[0].actions[0];z.handler&&z.handler()}break;case"ArrowUp":S.preventDefault();break;case"ArrowDown":S.preventDefault();break}};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[h,s,y]);const ye=o.useMemo(()=>({...b,activeCount:h.length,queuedCount:w.length,totalActive:h.length+w.length,serviceStats:H.getStats()}),[b,h.length,w.length]),je=o.useCallback((I,S={})=>A({type:"success",message:I,...S}),[A]),Je=o.useCallback((I,S={})=>A({type:"error",message:I,...S}),[A]),Ye=o.useCallback((I,S={})=>A({type:"warning",message:I,...S}),[A]),be=o.useCallback((I,S={})=>A({type:"info",message:I,...S}),[A]),Oe=o.useCallback((I,S={})=>A({type:"confirmation",message:I,persistent:!0,...S}),[A]),G=o.useCallback((I,S={})=>A({type:"achievement",message:I,...S}),[A]);return o.useEffect(()=>{r.enableContentNotifications&&k&&console.log(" Content notification system initialized")},[r.enableContentNotifications,k,A]),o.useEffect(()=>{if(r.enableOnboarding&&k){Ve.updateContext(k);const I=S=>{console.log(" Onboarding notification triggered:",S),A({...S,metadata:{...S.metadata,isOnboarding:!0}})};return Ve.addEventListener?.("notification",I),()=>{Ve.removeEventListener?.("notification",I)}}},[r.enableOnboarding,k,A]),o.useEffect(()=>()=>{K(),console.log("Notification system cleanup completed")},[K]),o.useEffect(()=>{h.length<t&&w.length>0&&P()},[h.length,w.length,t,P]),{notifications:h,displayQueue:w,currentContext:k,addNotification:A,removeNotification:y,updateContext:$,clearAll:K,dndMode:u,updateDndMode:W,quietHoursState:p,updateQuietHours:F,showSuccess:je,showError:Je,showWarning:Ye,showInfo:be,showConfirmation:Oe,showAchievement:G,performanceStats:ye,maxNotifications:t,enableKeyboardNavigation:s,enableSounds:n}},ka=({isOpen:r,onClose:t,onSave:s,className:n=""})=>{const[a,i]=o.useState({soundEnabled:!1,autoDismiss:!0,maxNotifications:5,enabledTypes:{success:!0,error:!0,warning:!0,info:!0,achievement:!0},celebrationLevel:pe.ACHIEVEMENT,reducedMotion:!1}),[l,u]=o.useState(le.OFF),[c,p]=o.useState({start:"22:00",end:"08:00"}),[f,h]=o.useState(!1);o.useEffect(()=>{if(r){const x=H.preferences;i(x),u(H.dndMode),p(H.quietHours),h(!1)}},[r]),o.useEffect(()=>{h(!0)},[a,l,c]);const v=o.useCallback((x,b)=>{i(m=>({...m,[x]:b}))},[]),w=o.useCallback((x,b)=>{i(m=>({...m,enabledTypes:{...m.enabledTypes,[x]:b}}))},[]),C=o.useCallback((x,b)=>{p(m=>({...m,[x]:b}))},[]),k=o.useCallback(()=>{H.updatePreferences(a),H.setDndMode(l),H.setQuietHours(c.start,c.end);const x={preferences:a,dndMode:l,quietHours:c};localStorage.setItem("ecc_notification_settings",JSON.stringify(x)),h(!1),s&&s(x),t()},[a,l,c,s,t]),j=o.useCallback(()=>{const x={soundEnabled:!1,autoDismiss:!0,maxNotifications:5,enabledTypes:{success:!0,error:!0,warning:!0,info:!0,achievement:!0},celebrationLevel:pe.ACHIEVEMENT,reducedMotion:!1};i(x),u(le.OFF),p({start:"22:00",end:"08:00"})},[]);if(o.useEffect(()=>{const x=b=>{b.key==="Escape"&&r&&(f?window.confirm("You have unsaved changes. Are you sure you want to close?")&&t():t())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r,f,t]),!r)return null;const O=e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col ${n}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:""})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notification Preferences"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"General Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sound Notifications"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Play sound for new notifications"})]}),e.jsx("input",{type:"checkbox",checked:a.soundEnabled,onChange:x=>v("soundEnabled",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-dismiss Notifications"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically hide notifications after a delay"})]}),e.jsx("input",{type:"checkbox",checked:a.autoDismiss,onChange:x=>v("autoDismiss",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Maximum Simultaneous Notifications: ",a.maxNotifications]}),e.jsx("input",{type:"range",min:"1",max:"10",value:a.maxNotifications,onChange:x=>v("maxNotifications",parseInt(x.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:"10"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Celebration Level"}),e.jsxs("select",{value:a.celebrationLevel,onChange:x=>v("celebrationLevel",x.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-white",children:[e.jsx("option",{value:pe.SUBTLE,children:"Subtle - Minimal animations"}),e.jsx("option",{value:pe.PROGRESS,children:"Progress - Fill animations"}),e.jsx("option",{value:pe.ACHIEVEMENT,children:"Achievement - Sparkles & glow"}),e.jsx("option",{value:pe.MILESTONE,children:"Milestone - Full celebrations"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reduced Motion"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Disable decorative animations"})]}),e.jsx("input",{type:"checkbox",checked:a.reducedMotion,onChange:x=>v("reducedMotion",x.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notification Types"}),e.jsx("div",{className:"space-y-3",children:[{key:"success",label:"Success Messages",icon:"",description:"Completion confirmations"},{key:"error",label:"Error Messages",icon:"",description:"System errors and failures"},{key:"warning",label:"Warning Messages",icon:"",description:"Important alerts"},{key:"info",label:"Information Messages",icon:"",description:"General information"},{key:"achievement",label:"Achievement Messages",icon:"",description:"Celebrations and milestones"}].map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:x.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:x.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.description})]})]}),e.jsx("input",{type:"checkbox",checked:a.enabledTypes[x.key],onChange:b=>w(x.key,b.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]},x.key))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Do Not Disturb"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Mode"}),e.jsx("div",{className:"space-y-2",children:[{value:le.OFF,label:"Off",description:"Show all notifications"},{value:le.QUIET_HOURS,label:"Quiet Hours",description:"Respect quiet hours schedule"},{value:le.FOCUS_MODE,label:"Focus Mode",description:"Only critical and high priority"},{value:le.CRITICAL_ONLY,label:"Critical Only",description:"Only system-critical notifications"}].map(x=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"dndMode",value:x.value,checked:l===x.value,onChange:b=>u(b.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:x.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.description})]})]},x.value))})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Quiet Hours"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"Start Time"}),e.jsx("input",{type:"time",value:c.start,onChange:x=>C("start",x.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"End Time"}),e.jsx("input",{type:"time",value:c.end,onChange:x=>C("end",x.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-white"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"During quiet hours, only critical notifications will be shown"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l===le.OFF?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-300",children:l===le.OFF?"Notifications Active":`Do Not Disturb: ${l.replace("_"," ")}`})]}),l===le.QUIET_HOURS&&e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 mt-1",children:["Quiet hours: ",c.start," - ",c.end]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Test Notifications"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{type:"success",label:"Success",icon:""},{type:"error",label:"Error",icon:""},{type:"warning",label:"Warning",icon:""},{type:"achievement",label:"Achievement",icon:""}].map(x=>e.jsxs("button",{onClick:()=>{const b={type:x.type,message:`This is a test ${x.type} notification`,title:`Test ${x.label}`,category:"system",context:"global"};H.processNotification(b)},className:"flex items-center justify-center space-x-2 px-3 py-2 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:[e.jsx("span",{children:x.icon}),e.jsx("span",{children:x.label})]},x.type))})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Reset to Defaults"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:k,className:`px-6 py-2 text-sm font-medium text-white rounded-lg transition-colors ${f?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,disabled:!f,children:f?"Save Changes":"No Changes"})]})]})]})});return Qe.createPortal(O,document.body)},wa=({isOpen:r,onClose:t,notifications:s=[],onMarkAsRead:n,onMarkAllAsRead:a,onDeleteNotification:i,onClearHistory:l,onUpdatePreferences:u,preferences:c={},className:p=""})=>{const[f,h]=o.useState("recent"),[v,w]=o.useState("all"),[C,k]=o.useState(""),[j,O]=o.useState(!1),x=o.useRef(null);o.useEffect(()=>{const y=R=>{x.current&&!x.current.contains(R.target)&&t()};if(r)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[r,t]),o.useEffect(()=>{const y=R=>{R.key==="Escape"&&t()};if(r)return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r,t]);const m=s.filter(y=>!(v!=="all"&&y.type!==v||C&&!y.message.toLowerCase().includes(C.toLowerCase()))).reduce((y,R)=>{const A=new Date(R.timestamp).toDateString();return y[A]||(y[A]=[]),y[A].push(R),y},{}),T=y=>{switch(y){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";case"achievement":return"";default:return""}},N=y=>{switch(y){case"success":return"text-green-600 bg-green-50";case"error":return"text-red-600 bg-red-50";case"warning":return"text-amber-600 bg-amber-50";case"info":return"text-blue-600 bg-blue-50";case"achievement":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},E=y=>{const R=new Date(y),$=(new Date-R)/(1e3*60*60);return $<1?"Just now":$<24?`${Math.floor($)}h ago`:R.toLocaleDateString()},_=s.filter(y=>!y.read).length;if(!r)return null;const P=e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{ref:x,className:`bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col ${p}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Notification Center"}),_>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:_})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>h("recent"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${f==="recent"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Recent"}),e.jsx("button",{onClick:()=>h("settings"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${f==="settings"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Settings"})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[f==="recent"&&e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search notifications...",value:C,onChange:y=>k(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("select",{value:v,onChange:y=>w(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"achievement",children:"Achievement"})]}),e.jsxs("div",{className:"flex space-x-2",children:[_>0&&e.jsx("button",{onClick:a,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Mark all as read"}),e.jsx("button",{onClick:l,className:"text-sm text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Clear history"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Object.keys(m).length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5-5-5h5v-12h4v12z"})}),e.jsx("p",{children:"No notifications found"})]})}):Object.entries(m).map(([y,R])=>e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:y}),e.jsx("div",{className:"space-y-2",children:R.map(A=>e.jsx("div",{className:`p-3 rounded-lg border transition-colors ${A.read?"bg-gray-50 border-gray-200 dark:bg-gray-700 dark:border-gray-600":"bg-white border-gray-300 dark:bg-gray-800 dark:border-gray-500"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${N(A.type)}`,children:e.jsx("span",{className:"text-lg",children:T(A.type)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[A.title&&e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:A.title}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:A.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:E(A.timestamp)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!A.read&&e.jsx("button",{onClick:()=>n(A.id),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Mark as read",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:()=>i(A.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete notification",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},A.id))})]},y))})]}),f==="settings"&&e.jsx("div",{className:"p-4 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${H.dndMode==="off"?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:H.dndMode==="off"?"Notifications Active":"Do Not Disturb"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:H.dndMode==="off"?"All notifications are enabled":`Mode: ${H.dndMode.replace("_"," ")}`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sound Notifications"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Play sound for new notifications"})]}),e.jsx("input",{type:"checkbox",checked:c.soundEnabled||!1,onChange:y=>u({soundEnabled:y.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-dismiss Notifications"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically hide notifications after a delay"})]}),e.jsx("input",{type:"checkbox",checked:c.autoDismiss!==!1,onChange:y=>u({autoDismiss:y.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:()=>O(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:"Advanced Preferences"})]})})]})]})})]})]})});return e.jsxs(X.Fragment,{children:[Qe.createPortal(P,document.body),e.jsx(ka,{isOpen:j,onClose:()=>O(!1),onSave:y=>{u&&u(y.preferences),O(!1)}})]})},Na=({message:r,type:t="info",targetElement:s,targetSelector:n,position:a="below",duration:i=5e3,persistent:l=!1,onClose:u,actions:c=[],className:p="",showArrow:f=!0,offset:h=8})=>{const[v,w]=o.useState(!1),[C,k]=o.useState({x:0,y:0}),[j,O]=o.useState(a),x=o.useRef(null),b=o.useRef(null);o.useEffect(()=>{s?b.current=s:n&&(b.current=document.querySelector(n))},[s,n]);const m=()=>{if(!b.current||!x.current)return;const y=b.current.getBoundingClientRect(),R=x.current.getBoundingClientRect(),A=window.innerWidth,$=window.innerHeight;let W=0,F=0,K=a;switch(a){case"below":W=y.left+y.width/2-R.width/2,F=y.bottom+h,F+R.height>$&&(K="above",F=y.top-R.height-h);break;case"above":W=y.left+y.width/2-R.width/2,F=y.top-R.height-h,F<0&&(K="below",F=y.bottom+h);break;case"right":W=y.right+h,F=y.top+y.height/2-R.height/2,W+R.width>A&&(K="left",W=y.left-R.width-h);break;case"left":W=y.left-R.width-h,F=y.top+y.height/2-R.height/2,W<0&&(K="right",W=y.right+h);break}W=Math.max(8,Math.min(W,A-R.width-8)),F=Math.max(8,Math.min(F,$-R.height-8)),k({x:W,y:F}),O(K)};o.useEffect(()=>{if(r&&b.current){w(!0),setTimeout(m,50);const y=()=>m();return window.addEventListener("scroll",y),window.addEventListener("resize",y),()=>{window.removeEventListener("scroll",y),window.removeEventListener("resize",y)}}},[r,b.current]),o.useEffect(()=>{if(v&&!l&&i>0){const y=setTimeout(()=>{T()},i);return()=>clearTimeout(y)}},[v,l,i]);const T=()=>{w(!1),u&&u()},N=()=>{switch(t){case"success":return"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300";case"error":return"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300";case"warning":return"bg-amber-50 border-amber-200 text-amber-800 dark:bg-amber-900/20 dark:border-amber-800 dark:text-amber-300";case"info":return"bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300";case"hint":return"bg-purple-50 border-purple-200 text-purple-800 dark:bg-purple-900/20 dark:border-purple-800 dark:text-purple-300";default:return"bg-gray-50 border-gray-200 text-gray-800 dark:bg-gray-900/20 dark:border-gray-800 dark:text-gray-300"}},E=()=>{switch(t){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";case"hint":return"";default:return""}},_=()=>{const y="absolute w-0 h-0 border-solid";switch(j){case"below":return`${y} border-l-8 border-r-8 border-b-8 border-l-transparent border-r-transparent border-b-current -top-2 left-1/2 transform -translate-x-1/2`;case"above":return`${y} border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-current -bottom-2 left-1/2 transform -translate-x-1/2`;case"right":return`${y} border-t-8 border-b-8 border-r-8 border-t-transparent border-b-transparent border-r-current -left-2 top-1/2 transform -translate-y-1/2`;case"left":return`${y} border-t-8 border-b-8 border-l-8 border-t-transparent border-b-transparent border-l-current -right-2 top-1/2 transform -translate-y-1/2`;default:return""}};if(!r||!v)return null;const P=e.jsx("div",{ref:x,className:`fixed z-50 max-w-sm min-w-0 transition-all duration-300 ease-out ${p}`,style:{left:C.x,top:C.y,transform:v?"scale(1)":"scale(0.95)",opacity:v?1:0},children:e.jsxs("div",{className:`relative border rounded-lg shadow-lg p-3 ${N()}`,children:[f&&e.jsx("div",{className:_()}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-sm flex-shrink-0",children:E()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium leading-tight",children:r}),c.length>0&&e.jsx("div",{className:"flex space-x-2 mt-2",children:c.map((y,R)=>e.jsx("button",{onClick:y.handler,className:`text-xs px-2 py-1 rounded transition-colors ${y.primary?"bg-current text-white opacity-90 hover:opacity-100":"bg-white/20 hover:bg-white/30"}`,children:y.label},R))})]}),e.jsx("button",{onClick:T,className:"flex-shrink-0 text-current opacity-60 hover:opacity-100 transition-opacity","aria-label":"Close notification",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})});return Qe.createPortal(P,document.body)},Ca=({user:r,onSuccess:t,onError:s})=>{const[n,a]=o.useState(""),[i,l]=o.useState(!1),[u,c]=o.useState("general"),[p,f]=o.useState(0),h=async()=>{if(!n.trim()){s("Feedback cannot be empty.");return}if(n.trim().length<10){s("Feedback must be at least 10 characters long.");return}if(!r){s("Please log in to submit feedback.");return}l(!0);try{const v=await fetch("/.netlify/functions/send-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r?.email||"anonymous@eccapp.com",message:`Type: ${u}
Rating: ${p}/5

Feedback: ${n}`})}),w=await v.json();if(v.ok)t("Feedback submitted successfully! Thank you for your input."),a(""),c("general"),f(0);else throw new Error(w.error||"Something went wrong!")}catch(v){s(`Failed to submit feedback: ${v.message}`)}finally{l(!1)}};return e.jsx("div",{className:"p-6 w-full bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Give Us Feedback"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Feedback Type"}),e.jsxs("select",{value:u,onChange:v=>c(v.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white",children:[e.jsx("option",{value:"general",children:"General Feedback"}),e.jsx("option",{value:"clarity",children:"Content Clarity"}),e.jsx("option",{value:"engagement",children:"Engagement Level"}),e.jsx("option",{value:"cultural",children:"Cultural Relevance"}),e.jsx("option",{value:"application",children:"Application Opportunities"}),e.jsx("option",{value:"assessment",children:"Assessment Quality"}),e.jsx("option",{value:"bug",children:"Bug Report"}),e.jsx("option",{value:"feature",children:"Feature Request"}),e.jsx("option",{value:"ui",children:"User Interface"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Overall Rating"}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(v=>e.jsx("button",{onClick:()=>f(v),className:`w-8 h-8 rounded ${v<=p?"text-yellow-400 fill-current":"text-gray-300 dark:text-gray-600"} hover:text-yellow-400 transition-colors`,children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-full h-full",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},v))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your Feedback"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white transition duration-200 h-24 resize-y",placeholder:"Help us improve! Share feedback on content clarity, engagement, cultural relevance, or practical application opportunities. Report bugs, suggest features, or tell us how well the content met your learning objectives... (minimum 10 characters)",value:n,onChange:v=>a(v.target.value)}),e.jsxs("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:[n.length,"/10 characters minimum"]})]}),e.jsx("button",{onClick:h,disabled:i||!r||!n.trim()||n.trim().length<10,className:"w-full px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-sm transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Feedback"})]})})},ja=({onUpgradeClick:r})=>{const[t,s]=o.useState(null),[n,a]=o.useState(!1),[i,l]=o.useState(!1);o.useEffect(()=>{const h=()=>{const w=J.getTrialStatus(),C=J.getUserOnboardingInfo();s({...w,...C}),a(w.isOnTrial&&!i)};h();const v=setInterval(h,6e4);return()=>clearInterval(v)},[i]);const u=()=>{l(!0),a(!1)},c=()=>{r&&r()};if(!n||!t?.isOnTrial)return null;const{daysRemaining:p,isExpired:f}=t;return f?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4 animate-slide-down",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:" PRO Learning Trial Expired"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Your welcome trial has ended. Continue your learning journey with PRO features."})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:c,className:"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 hover:scale-105",children:"Continue Learning"}),e.jsx("button",{onClick:u,className:"text-red-400 hover:text-red-600 dark:hover:text-red-300 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}):e.jsxs("div",{className:"pro-background-soft border border-violet-200 dark:border-cyan-700 rounded-lg p-4 mb-4 animate-slide-down",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-violet-600 dark:text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-violet-800 dark:text-cyan-200 flex items-center",children:[" Welcome to PRO Learning!",e.jsxs("span",{className:"ml-2 bg-gradient-to-r from-violet-100 to-cyan-100 dark:from-violet-800 dark:to-cyan-800 text-violet-800 dark:text-cyan-200 px-2 py-1 rounded-full text-xs font-semibold",children:[p," day",p!==1?"s":""," left"]})]}),e.jsx("p",{className:"text-sm text-violet-700 dark:text-cyan-300 mt-1",children:"You're experiencing the full PRO features! Enjoy unlimited access to all subjects, advanced features, and more."})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:c,className:"pro-gradient-primary text-white px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 hover:scale-105 hover:shadow-lg",children:"Continue with PRO"}),e.jsx("button",{onClick:u,className:"text-violet-400 hover:text-violet-600 dark:text-cyan-400 dark:hover:text-cyan-300 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-violet-600 dark:text-cyan-400 mb-1",children:[e.jsx("span",{children:"Trial Progress"}),e.jsxs("span",{children:[9-p," of 9 days used"]})]}),e.jsx("div",{className:"w-full bg-violet-200 dark:bg-cyan-800 rounded-full h-2",children:e.jsx("div",{className:"pro-gradient-primary h-2 rounded-full transition-all duration-300",style:{width:`${(9-p)/9*100}%`}})})]})]})},Sa=({isVisible:r,onClose:t,onUpgrade:s})=>r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/40 rounded-full p-3",children:e.jsx(Ie,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white text-center mb-2",children:"API Rate Limit Reached"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 text-center mb-4",children:"You've reached your daily AI usage limit. The free tier allows 50 requests per day."}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:[e.jsxs("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2 flex items-center",children:[e.jsx(Ts,{className:"w-4 h-4 mr-2"}),"What you can do:"]}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:" Wait until tomorrow for your quota to reset"}),e.jsx("li",{children:" Upgrade to a paid tier for higher limits"}),e.jsx("li",{children:" Use the Content Generation feature (separate quota)"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4 mb-6",children:[e.jsxs("h4",{className:"font-medium text-purple-900 dark:text-purple-100 mb-2 flex items-center",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),"Upgrade Benefits:"]}),e.jsxs("ul",{className:"text-sm text-purple-800 dark:text-purple-200 space-y-1",children:[e.jsx("li",{children:" Up to 1,000 requests per day (Tier 1)"}),e.jsx("li",{children:" Priority support and faster responses"}),e.jsx("li",{children:" Access to advanced AI features"}),e.jsx("li",{children:" No daily interruptions"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"}),e.jsxs("button",{onClick:s,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-colors flex items-center justify-center",children:[e.jsx(Os,{className:"w-4 h-4 mr-2"}),"Upgrade"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-4",children:"Your quota resets daily at midnight UTC"})]})}):null,Ea=({content:r,onClick:t,onLoadToEditor:s,onDelete:n,isSelected:a})=>{const i=l=>{if(!l)return"N/A";const u=l.toDate?l.toDate():new Date(l);return u.toLocaleDateString()+" "+u.toLocaleTimeString()};return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border p-4 mb-4 cursor-pointer hover:shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 ${a?"border-blue-500 dark:border-blue-400 ring-2 ring-blue-200 dark:ring-blue-800 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,onClick:t,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate flex-1",children:r.name||"Untitled Content"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0",children:i(r.timestamp)})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:r.audienceClass||"N/A"}),e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:["Age: ",r.audienceAge||"N/A"]}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:r.audienceRegion||"N/A"})]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-3",children:r.generatedContent?r.generatedContent.length>200?r.generatedContent.substring(0,200)+"...":r.generatedContent:"No content available"}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),s()},className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 text-sm font-medium transition-colors flex items-center space-x-1",title:"Load to Editor","aria-label":"Load to Editor",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),e.jsx("span",{children:"Load"})]}),n&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),n()},className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm font-medium transition-colors flex items-center space-x-1",title:"Delete Content",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{children:"Delete"})]})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),t()},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium transition-colors",children:"View Details "})]})]})},Yt=({contentId:r,onClose:t,onFullScreenToggle:s,onDelete:n,isFullScreenMode:a,isSideView:i=!1,db:l,user:u,onError:c,onSuccess:p})=>{const[f,h]=o.useState(null),[v,w]=o.useState(""),[C,k]=o.useState(!1),[j,O]=o.useState(!1),[x,b]=o.useState(!0);o.useEffect(()=>{r&&l&&u&&(async()=>{try{const E=await Gr(Ae(l,`artifacts/${mt()}/users/${u.uid}/generatedContent`,r));if(E.exists()){const _=E.data();h(_),w(_.generatedContent||"")}else c("Content not found")}catch{c("Failed to fetch content details")}finally{b(!1)}})()},[r,l,u,c]);const m=async()=>{O(!0);try{await tr(Ae(l,`artifacts/${mt()}/users/${u.uid}/generatedContent`,r),{generatedContent:v}),h(N=>({...N,generatedContent:v})),k(!1)}catch{c("Failed to save changes")}finally{O(!1)}},T=()=>{const N=v||f?.generatedContent||"";navigator.clipboard.writeText(N).then(()=>{p&&p("Content copied to clipboard!")}).catch(()=>{const E=document.createElement("textarea");E.value=N,document.body.appendChild(E),E.select(),document.execCommand("copy"),document.body.removeChild(E),p&&p("Content copied to clipboard!")})};return x?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:t,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f.name||"Untitled Content"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n&&e.jsx("button",{onClick:n,className:"p-2 text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors",title:"Delete Content",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),!a&&i&&e.jsx("button",{onClick:s,className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",title:"Full Screen",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),a&&e.jsx("button",{onClick:s,className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",title:"Exit Full Screen",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:T,className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",title:"Copy to Clipboard",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),C?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:m,disabled:j,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50",children:j?"Saving...":"Save"})]}):e.jsx("button",{onClick:()=>k(!0),className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Audience Class"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f.audienceClass||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Age Group"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f.audienceAge||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Region"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:f.audienceRegion||"N/A"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Generated Content"}),C?e.jsx("textarea",{value:v,onChange:N=>w(N.target.value),className:"w-full h-96 p-4 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white resize-none",placeholder:"Enter your content here..."}):e.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-900 dark:text-white font-sans leading-relaxed",children:f.generatedContent||"No content available"})})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Content not found"})})},Ta=({db:r,user:t,onError:s,onSuccess:n,contentHistory:a,onLoadToEditor:i,selectedContentId:l,onContentSelectionHandled:u})=>{const[c,p]=o.useState({currentSelectedContentId:null,isDetailViewOpen:!1,isFullScreenMode:!1,searchTerm:"",deleteConfirmation:{isOpen:!1,contentId:null,contentName:""},isDeleting:!1,isMobile:window.innerWidth<768}),f=o.useMemo(()=>a||[],[a]),h=o.useCallback(m=>{p(T=>({...T,currentSelectedContentId:m,isDetailViewOpen:!0,isFullScreenMode:T.isMobile}))},[]),v=o.useCallback(()=>{const m=window.innerWidth<768;p(T=>{const N={...T,isMobile:m};return m&&T.isDetailViewOpen&&!T.isFullScreenMode&&(N.isFullScreenMode=!0),N})},[]);o.useEffect(()=>(window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)),[v]),o.useEffect(()=>{l&&f.length>0&&f.find(T=>T.id===l)&&(h(l),u&&u())},[l,f,u,h]);const w=o.useCallback(()=>{c.isMobile&&c.isFullScreenMode||p(m=>({...m,isFullScreenMode:!m.isFullScreenMode}))},[c.isMobile,c.isFullScreenMode]),C=o.useCallback(()=>{p(m=>({...m,isDetailViewOpen:!1,currentSelectedContentId:null,isFullScreenMode:!1}))},[]),k=o.useCallback((m,T)=>{p(N=>({...N,deleteConfirmation:{isOpen:!0,contentId:m,contentName:T}}))},[]),j=o.useCallback(async()=>{if(c.deleteConfirmation.contentId){p(m=>({...m,isDeleting:!0}));try{await Qr(Ae(r,`artifacts/${mt()}/users/${t.uid}/generatedContent`,c.deleteConfirmation.contentId)),c.currentSelectedContentId===c.deleteConfirmation.contentId&&C(),n(" Content deleted successfully!")}catch(m){console.error("Error deleting content:",m),s("Failed to delete content. Please try again.")}finally{p(m=>({...m,isDeleting:!1,deleteConfirmation:{isOpen:!1,contentId:null,contentName:""}}))}}},[c.deleteConfirmation.contentId,c.currentSelectedContentId,r,t.uid,n,s,C]),O=o.useCallback(()=>{p(m=>({...m,deleteConfirmation:{isOpen:!1,contentId:null,contentName:""}}))},[]),x=m=>{i&&(i({bookContent:m.bookContent||"",audienceClass:m.audienceClass||"",audienceAge:m.audienceAge||"",audienceRegion:m.audienceRegion||"",outputWordCount:m.outputWordCount||"",customInstructions:m.customInstructions||""}),n(" Content loaded to editor!"))},b=o.useMemo(()=>f.filter(m=>{if(!m)return!1;const T=m.name||"",N=m.generatedContent||"",E=c.searchTerm.toLowerCase();return T.toLowerCase().includes(E)||N.toLowerCase().includes(E)}),[f,c.searchTerm]);return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:`flex flex-1 transition-all duration-300 ${c.isFullScreenMode?"hidden":"flex"}`,children:[e.jsxs("div",{className:`${c.isDetailViewOpen&&!c.isMobile?"w-2/5 lg:w-1/3":"flex-1"} flex flex-col transition-all duration-300`,children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mr-4",children:"Content History"}),e.jsx("input",{type:"text",placeholder:"Search history...",value:c.searchTerm,onChange:m=>p(T=>({...T,searchTerm:m.target.value})),className:"flex-1 p-3 border border-gray-300 dark:border-gray-700 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50 dark:bg-gray-900",children:b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500 mb-2",children:e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c.searchTerm?"No content found matching your search.":"No content generated yet. Create some content to see it here!"})]}):b.map(m=>e.jsx(Ea,{content:m,onClick:()=>h(m.id),onLoadToEditor:()=>x(m),onDelete:()=>k(m.id,m.name||"Untitled Content"),isSelected:c.currentSelectedContentId===m.id},m.id))})]}),c.isDetailViewOpen&&c.currentSelectedContentId&&!c.isMobile&&e.jsx("div",{className:"w-3/5 lg:w-2/3 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 transition-all duration-300",children:e.jsx(Yt,{contentId:c.currentSelectedContentId,onClose:C,onFullScreenToggle:w,onDelete:()=>{const m=f.find(T=>T.id===c.currentSelectedContentId);k(c.currentSelectedContentId,m?.name||"Untitled Content")},isFullScreenMode:!1,isSideView:!0,isMobile:!1,db:r,user:t,onError:s,onSuccess:n})})]}),c.isDetailViewOpen&&c.currentSelectedContentId&&(c.isFullScreenMode||c.isMobile)&&e.jsx("div",{className:"fixed inset-0 bg-white dark:bg-gray-900 z-50 transition-all duration-300",children:e.jsx(Yt,{contentId:c.currentSelectedContentId,onClose:C,onFullScreenToggle:w,onDelete:()=>{const m=f.find(T=>T.id===c.currentSelectedContentId);k(c.currentSelectedContentId,m?.name||"Untitled Content")},isFullScreenMode:!0,isSideView:!1,isMobile:c.isMobile,db:r,user:t,onError:s,onSuccess:n})}),c.deleteConfirmation.isOpen&&e.jsx(Te,{type:"confirmation",title:"Delete Content",message:`Are you sure you want to delete "${c.deleteConfirmation.contentName}"? This action cannot be undone.`,onConfirm:j,onCancel:O,onClose:O,confirmText:c.isDeleting?"Deleting...":"Delete",cancelText:"Cancel",confirmButtonClass:"bg-red-600 hover:bg-red-700",isLoading:c.isDeleting,persistent:!0})]})},Aa=X.lazy(()=>Ne(()=>import("./ContentGenerationPage-CLSliVTm.js"),__vite__mapDeps([0,1,2,3,4,5,6])));X.lazy(()=>Ne(()=>import("./GeneratedContentDisplay-BsAPOoNW.js").then(r=>r.a),__vite__mapDeps([4,1])));const Ia=X.lazy(()=>Ne(()=>import("./MyProfilePage-CKij7pmA.js"),__vite__mapDeps([7,1,5,8]))),_a=X.lazy(()=>Ne(()=>import("./AdvancedSettingsPage-tGaTBQpb.js"),__vite__mapDeps([9,1,5,3]))),Ra=X.lazy(()=>Ne(()=>import("./PreferencesPage-CscD4hrl.js"),__vite__mapDeps([10,1,5]))),Oa=X.lazy(()=>Ne(()=>import("./PurchasePage-PYp0WuFM.js"),__vite__mapDeps([11,1,2,8,5]))),xe={apiKey:"AIzaSyBNvDI9g6rQdwsPj7muECmr7RKaby6qyQc",authDomain:"project-q-34d01.firebaseapp.com",projectId:"project-q-34d01",storageBucket:"project-q-34d01.firebasestorage.app",messagingSenderId:"910875870805",appId:"1:910875870805:web:e8a5396a8c91825e3fb6dc",measurementId:"G-00GVMJ9MEE"};if(!xe.apiKey||!xe.projectId)throw console.error(" Firebase configuration is incomplete:",xe),new Error("Firebase configuration is missing required fields");console.log(" Firebase configuration loaded for project:",xe.projectId);const Ee=xe?.appId||"defaultAppId";let Be,ct,re;const La=()=>{const[r,t]=o.useState(null),[s,n]=o.useState(!1),[a,i]=o.useState("auth"),[l,u]=o.useState("generation"),[c,p]=o.useState("light"),[f,h]=o.useState(null),[v,w]=o.useState(""),[C,k]=o.useState("success"),{preferences:j}=Kn();console.log("Settings preferences loaded:",j);const O=(d,g)=>{switch(g.type){case"SET_BOOK_CONTENT":return{...d,bookContent:g.payload};case"SET_AUDIENCE_CLASS":return{...d,audienceClass:g.payload};case"SET_AUDIENCE_AGE":return{...d,audienceAge:g.payload};case"SET_AUDIENCE_REGION":return{...d,audienceRegion:g.payload};case"SET_OUTPUT_WORD_COUNT":return{...d,outputWordCount:g.payload};case"SET_CUSTOM_INSTRUCTIONS":return{...d,customInstructions:g.payload};case"SET_SELECTED_SUBJECT":return{...d,selectedSubject:g.payload};case"SET_SELECTED_PERSONA":return{...d,selectedPersona:g.payload};case"RESET_FORM":return{bookContent:"",audienceClass:"",audienceAge:"",audienceRegion:"",outputWordCount:"",customInstructions:"",selectedSubject:"",selectedPersona:"educator"};case"LOAD_FROM_HISTORY":return{...d,bookContent:g.payload.bookContent||"",audienceClass:g.payload.audienceClass||"",audienceAge:g.payload.audienceAge||"",audienceRegion:g.payload.audienceRegion||"",outputWordCount:g.payload.outputWordCount||"",customInstructions:g.payload.customInstructions||"",selectedSubject:g.payload.selectedSubject||"",selectedPersona:g.payload.selectedPersona||"educator"};case"UPDATE_FROM_SETTINGS":return{...d,selectedPersona:g.payload.selectedPersona||d.selectedPersona,outputWordCount:g.payload.defaultOutputLength||d.outputWordCount,customInstructions:g.payload.defaultInstructions||d.customInstructions};default:return d}},[x,b]=o.useReducer(O,{bookContent:"",audienceClass:"",audienceAge:"",audienceRegion:"",outputWordCount:"",customInstructions:"",selectedSubject:"",selectedPersona:"educator"}),m=x.bookContent;x.audienceClass,x.audienceAge,x.audienceRegion,x.outputWordCount,x.customInstructions;const T=x.selectedSubject,N=x.selectedPersona,E=o.useCallback(d=>b({type:"SET_BOOK_CONTENT",payload:d}),[]),_=o.useCallback(d=>b({type:"SET_AUDIENCE_CLASS",payload:d}),[]),P=o.useCallback(d=>b({type:"SET_AUDIENCE_AGE",payload:d}),[]),y=o.useCallback(d=>b({type:"SET_AUDIENCE_REGION",payload:d}),[]),R=o.useCallback(d=>b({type:"SET_OUTPUT_WORD_COUNT",payload:d}),[]),A=o.useCallback(d=>b({type:"SET_CUSTOM_INSTRUCTIONS",payload:d}),[]),$=o.useCallback(d=>b({type:"SET_SELECTED_SUBJECT",payload:d}),[]),W=o.useCallback(d=>b({type:"SET_SELECTED_PERSONA",payload:d}),[]),[F,K]=o.useState("basic"),ye=F==="pro",[je,Je]=o.useState({selectedPersona:"educator",defaultOutputLength:"",defaultInstructions:"",modelSettings:{temperature:.7,maxTokens:1e3}}),[Ye,be]=o.useState(""),[Oe,G]=o.useState(""),[I,S]=o.useState(""),[z,B]=o.useState([]),[ne,ue]=o.useState(""),[ee,za]=o.useState(""),[Ba,wt]=o.useState(null),[Ha,Nt]=o.useState(""),[Va,Ct]=o.useState([]),[Wa,jt]=o.useState({}),[qa,St]=o.useState({}),[Ga,Qa]=o.useState(!1),[Ka,xr]=o.useState(!1),{isListening:Ze,transcript:Xe,error:yr,isSupported:br,startListening:Et,stopListening:Tt}=ma(),{notifications:Le,removeNotification:At,updateContext:It}=va({maxNotifications:5,enableKeyboardNavigation:!0,enableSounds:!1,defaultContext:fe.GLOBAL}),[et,_t]=o.useState(!1);o.useEffect(()=>{r?.uid&&Ve.initialize(r.uid,{name:r.displayName||"User"})},[r]);const[vr,tt]=o.useState(!1),rt=o.useCallback(()=>{tt(!0)},[]),kr=o.useCallback(()=>{tt(!1)},[]),wr=o.useCallback(()=>{u("purchase"),tt(!1)},[]);o.useEffect(()=>{if(!Be){console.log("Firebase Config received by App:",xe);const g=Kr();Be=g.length>0?g[0]:Zt(xe),ct=Xt(Be),re=er(Be)}n(!0);const d=xt(ct,g=>{t(g),g?((async()=>{try{if(J.getTierMetadata().setAt){const L=J.checkTrialExpiration();L.trialExpired?S(L.message):S(` Welcome back, ${g.email||g.displayName||"User"}!`)}else if(J.initializeNewUser()){const te=J.getTrialStatus();S(` Welcome to ECC! You have ${te.daysRemaining} days of PRO access to explore all features!`)}}catch(D){console.error("Error initializing user:",D),S(` Welcome, ${g.email||g.displayName||"User"}!`)}})(),i("app")):i("auth")});return()=>d()},[]),o.useEffect(()=>{(async()=>{if(!(!re||!r||a!=="app"))try{const g=Ut(nt(re,`artifacts/${Ee}/users/${r?.uid}/generatedContent`),Zr("timestamp","desc")),D=(await Xr(g)).docs.map(L=>({id:L.id,...L.data()}));B(D)}catch(g){console.error(" Failed to fetch content history:",g)}})()},[r?.uid,a,r]),o.useEffect(()=>{if(!re||!r?.uid||!s||a!=="app")return;let d=null,g=!0;return(async()=>{try{const D=`artifacts/${Ee}/users/${r.uid}/generatedContent`,L=Ut(nt(re,D));d=$t(L,te=>{if(g)try{const Q=te.docs.map(Y=>({id:Y.id,...Y.data()}));Q.sort((Y,oe)=>(oe.timestamp?.toDate()||0)-(Y.timestamp?.toDate()||0)),B(Q)}catch(Q){console.error(" Error processing snapshot:",Q)}},te=>{g&&(console.error(" Firestore listener error:",te),te.code!=="permission-denied"&&G(`Failed to load history: ${te.message}`))})}catch(D){console.error(" Error setting up listener:",D)}})(),()=>{if(g=!1,d)try{d()}catch(D){console.warn("Warning: Error during listener cleanup:",D)}}},[r?.uid,s,a]),o.useEffect(()=>{if(!re||!r?.uid||!s||a!=="app")return;const d=Ae(re,`artifacts/${Ee}/users/${r.uid}`),g=$t(d,M=>{if(M.exists()){const D=M.data();Je(L=>({...L,...D})),b({type:"UPDATE_FROM_SETTINGS",payload:D})}},M=>{console.error(" User settings listener error:",M)});return()=>g()},[r,s,a]);const Rt=o.useCallback(d=>{const g=l;console.log(` handlePageNavigation called: ${g} -> ${d}`),u(d),h(null);const M={generation:fe.CONTENT_GENERATION,history:fe.GLOBAL,purchase:fe.GLOBAL};It(M[d]||fe.GLOBAL),console.log(`Navigating from ${g} to ${d}`)},[l,It]),Ot=o.useCallback(d=>{if(!d||!d.trim())return;const g=d.toLowerCase().trim();if(console.log("Processing voice command:",g),g.includes("content generation")||g.includes("generate content")||g.includes("generation page")){u("generation"),h(null),w("Navigating to Content Generation"),k("success");return}if(g.includes("content history")||g.includes("view history")||g.includes("history page")){u("history"),h(null),w("Navigating to Content History"),k("success");return}if(g.includes("my profile")||g.includes("profile settings")){h("profile"),w("Opening Profile Settings"),k("success");return}if(g.includes("advanced settings")){h("advanced"),w("Opening Advanced Settings"),k("success");return}if(g.includes("preferences")){h("preferences"),w("Opening Preferences"),k("success");return}if(g.includes("select mathematics")||g.includes("choose mathematics")){$("Mathematics"),w("Mathematics subject selected"),k("success");return}if(g.includes("select science")||g.includes("choose science")){$("Science"),w("Science subject selected"),k("success");return}if(g.includes("select physics")||g.includes("choose physics")){$("Physics"),w("Physics subject selected"),k("success");return}if(g.includes("select chemistry")||g.includes("choose chemistry")){$("Chemistry"),w("Chemistry subject selected"),k("success");return}if(g.includes("select history")||g.includes("choose history")){$("History"),w("History subject selected"),k("success");return}if(g.includes("select literature")||g.includes("choose literature")){$("Literature"),w("Literature subject selected"),k("success");return}if(g.includes("select finance")||g.includes("choose finance")||g.includes("select accounting")||g.includes("choose accounting")){$("Accounting & Finance"),w("Accounting & Finance subject selected"),k("success");return}if(g.includes("scroll down")){window.scrollBy({top:300,behavior:"smooth"}),w("Scrolling page down"),k("info");return}if(g.includes("scroll up")){window.scrollBy({top:-300,behavior:"smooth"}),w("Scrolling page up"),k("info");return}w(`Command not recognized: "${d}"`),k("error")},[Rt,$]);o.useEffect(()=>{Xe&&Ot(Xe)},[Ot,Xe]),o.useEffect(()=>{const d=g=>{const{bookContent:M,subject:D}=g.detail;u("generation"),h(null),E(M),$(D||""),w("Navigating to Content Generation with saved content"),k("success")};return window.addEventListener("navigateToContentGeneration",d),()=>window.removeEventListener("navigateToContentGeneration",d)},[E,$]);const Nr=o.useCallback(()=>{Ze?Tt():Et()},[Ze,Et,Tt]);o.useEffect(()=>{if(v){const d=setTimeout(()=>{w("")},3e3);return()=>clearTimeout(d)}},[v]);const Cr=async()=>{G(""),S("");try{await es(ct),be(""),B([]),E(""),_(""),P(""),y(""),R(""),A(""),K("basic"),wt(null),Nt(""),Ct([]),jt({}),St({}),S(" Logged out successfully."),i("auth")}catch(d){console.error("Logout error:",d),G(`Logout failed: ${d.message}`)}},jr=o.useCallback(async(d,g)=>{const M="/.netlify/functions/generate-content";if(!d)throw new Error("Invalid argument: data is required for this function.");let D;if(Array.isArray(d))D=d.length>0?{contents:d}:null;else if(typeof d=="object")D={...d,requestType:d.requestType||"generateContent",sessionId:r?.uid||"anonymous",timestamp:new Date().toISOString(),currentSubject:d.currentSubject||null,aiPersona:d.aiPersona||null};else throw new Error("Invalid data format. Expected object or array.");if(!D)throw new Error("Failed to process payload data.");try{const L=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json","X-Request-Source":"ECC-App"},body:JSON.stringify(D),signal:g});if(g&&g.aborted)throw new Error("Request was cancelled");if(!L.ok){const Q=await L.json().catch(()=>({error:"Failed to parse error response",details:L.statusText})),Y=Q.error||"",oe=Q.details||"";throw L.status===429||Y.toLowerCase().includes("rate limit")||Y.toLowerCase().includes("too many requests")||Y.toLowerCase().includes("quota")||oe.toLowerCase().includes("rate limit")||oe.toLowerCase().includes("too many requests")||oe.toLowerCase().includes("quota")?(rt(),new Error("Rate limit exceeded: Please wait a moment before trying again.")):new Error(`API error from Netlify Function: ${L.status} - ${Q.details||Q.error||Q.message||"Unknown error"}`)}const te=await L.json();if(g&&g.aborted)throw new Error("Request was cancelled");if(te.generatedContent)return te.generatedContent;throw new Error("Failed to get content from API. Unexpected response structure.")}catch(L){throw console.error("Error in callGeminiAPI:",L),L.name==="AbortError"||L.message.includes("cancelled")?new Error("Request was cancelled"):L.name==="TypeError"&&L.message.includes("fetch")?new Error("Network error: Unable to connect to the AI service. Please check your internet connection."):L.message.includes("400")?new Error("Invalid request: Please check your input and try again."):L.message.includes("401")?new Error("Authentication error: Please try logging out and logging in again."):L.message.includes("429")||L.message.includes("Rate limit exceeded")?(rt(),new Error("Rate limit exceeded: Please wait a moment before trying again.")):L.message.includes("500")?new Error("Server error: The AI service is temporarily unavailable. Please try again later."):L}},[r,rt]),Lt=o.useCallback(d=>{const g=[];if(!d||typeof d!="string")return console.warn("Invalid text provided to parseTextQuizzes"),g;const M=/---QUIZ_START---\s*([\s\S]*?)\s*---QUIZ_END---/g;let D;for(;(D=M.exec(d))!==null;){const L=D[1];if(!L)continue;L.split(/\n\s*\n/).filter(Q=>{const Y=Q.trim();return Y.startsWith("Q")||Y.match(/^\d+\.|Question\s*\d+/)}).forEach((Q,Y)=>{try{const oe=Q.match(/(?:Q\d+:|Question\s*\d+:|\d+\.)\s*(.*?)(?=\n[A-D]\)|$)/s),ve=Q.match(/A\)\s*(.*)\s*\nB\)\s*(.*)\s*\nC\)\s*(.*)\s*\nD\)\s*(.*)/s),st=Q.match(/Correct:\s*([A-D])/),Mt=Q.match(/Explanation:\s*(.*)$/s);if(oe&&ve&&st){const Pe={id:`quiz-${Date.now()}-${Y+1}`,question:oe[1].trim(),options:{A:ve[1].trim(),B:ve[2].trim(),C:ve[3].trim(),D:ve[4].trim()},correctAnswer:st[1].trim(),explanation:Mt?Mt[1].trim():"No explanation provided.",difficulty:"medium",category:"general"};Pe.question.length>0&&Object.values(Pe.options).every(Rr=>Rr.length>0)&&["A","B","C","D"].includes(Pe.correctAnswer)&&g.push(Pe)}}catch(oe){console.warn(`Error parsing quiz question ${Y+1}:`,oe)}})}return console.log(`Parsed ${g.length} quiz questions from content`),g},[]);o.useCallback(d=>{b({type:"LOAD_FROM_HISTORY",payload:d}),be(d.generatedContent||""),K(d.controlTier||"basic"),wt(d.id),Nt(d.name||`Content - ${new Date(d.timestamp?.toDate()).toLocaleString()}`),Ct(d.quizzes||[]),jt({}),St({}),xr(!1),S(" Content loaded from history!")},[]),o.useMemo(()=>!ee||ee.trim()===""?z:z.filter(d=>d.name&&d.name.toLowerCase().includes(ee.toLowerCase())||d.generatedContent&&d.generatedContent.toLowerCase().includes(ee.toLowerCase())||d.bookContent&&d.bookContent.toLowerCase().includes(ee.toLowerCase())||d.audienceClass&&d.audienceClass.toLowerCase().includes(ee.toLowerCase())||d.audienceAge&&d.audienceAge.toLowerCase().includes(ee.toLowerCase())||d.audienceRegion&&d.audienceRegion.toLowerCase().includes(ee.toLowerCase())),[z,ee]),o.useCallback((d,g="error",M={})=>{if(console.error("Application error:",d),g==="confirmation"){const D={onConfirm:M.onConfirm||(()=>{}),onCancel:M.onCancel||(()=>{}),confirmText:M.confirmText||"Confirm",cancelText:M.cancelText||"Cancel",confirmButtonClass:M.confirmButtonClass||"bg-blue-600 hover:bg-blue-700"};G(`${d} (${D.confirmText}/${D.cancelText})`),M.onConfirm&&setTimeout(()=>{window.confirm(d)?M.onConfirm():M.onCancel&&M.onCancel()},100)}else typeof d=="string"?G(d):d?.message?G(d.message):G("An unexpected error occurred. Please try again.")},[]);const Pt=o.useCallback(d=>{h(d)},[]),Sr=o.useCallback(async(d,g={})=>{if(be(d),g&&typeof g=="object"&&(g.bookContent&&E(g.bookContent),g.audienceClass&&_(g.audienceClass),g.audienceAge&&P(g.audienceAge),g.audienceRegion&&y(g.audienceRegion),g.outputWordCount&&R(g.outputWordCount),g.customInstructions&&A(g.customInstructions),g.subject&&$(g.subject)),r&&re&&d)try{const M=nt(re,`artifacts/${Ee}/users/${r.uid}/generatedContent`),D=Lt(d);let L="Generated Content";g.subject&&(L=`${g.subject} Content`),g.contentType==="quiz"&&(L=`${g.subject||"General"} Quiz`),L+=` - ${new Date().toLocaleDateString()}`;const te={name:L,generatedContent:d,bookContent:g.bookContent||"",audienceClass:g.audienceClass||"",audienceAge:g.audienceAge||"",audienceRegion:g.audienceRegion||"",outputWordCount:g.outputWordCount||"",customInstructions:g.customInstructions||"",selectedSubject:g.subject||"",selectedPersona:g.selectedPersona||N,contentType:g.contentType||"content",quizzes:D,timestamp:Jr(),wordCount:d.split(" ").length,characterCount:d.length};await Yr(M,te),console.log(" Content saved to history successfully"),S(" Content generated and saved to history!")}catch(M){console.error("Error saving content to history:",M),G("Content generated but failed to save to history: "+M.message)}else S("Content generated successfully!")},[r,N,Lt,P,_,y,E,A,R,$]),Er=o.useCallback(async d=>{if(!(!r||!re))try{const g=Ae(re,`artifacts/${Ee}/users/${r.uid}`);await tr(g,{...je,...d}),S("Settings updated successfully!"),d.selectedPersona&&W(d.selectedPersona),d.defaultOutputLength&&R(d.defaultOutputLength),d.defaultInstructions&&A(d.defaultInstructions)}catch(g){console.error("Error updating user settings:",g),G("Failed to update settings: "+g.message)}},[r,je,W,R,A]),[Tr,Ar]=o.useState(null),Ir=o.useMemo(()=>Le.map(d=>e.jsx(Te,{message:d.message,type:d.type,duration:d.duration,title:d.title,onClose:()=>At(d.id),onConfirm:d.onConfirm,onCancel:d.onCancel,position:d.position?.position||"default",persistent:d.persistent},d.id)),[Le,At]);if(!s)return e.jsx(un,{});if(a==="auth")return e.jsx(aa,{onAuthSuccess:d=>{t(d),S(`Welcome, ${d.email||d.displayName||"User"}!`),i("app")},onError:d=>{G(d)}});const Se=({componentName:d="Component"})=>e.jsx(cn,{componentName:d}),_r=()=>f==="profile"?e.jsx(o.Suspense,{fallback:e.jsx(Se,{componentName:"Profile Settings"}),children:e.jsx(Ia,{user:r,onBack:()=>h(null),onSuccess:S,onError:G})}):f==="advanced"?e.jsx(o.Suspense,{fallback:e.jsx(Se,{componentName:"Advanced Settings"}),children:e.jsx(_a,{user:r,onBack:()=>h(null),userSettings:je,onUpdateSettings:Er,isProUser:ye})}):f==="preferences"?e.jsx(o.Suspense,{fallback:e.jsx(Se,{componentName:"Preferences"}),children:e.jsx(Ra,{user:r,onBack:()=>h(null)})}):l==="generation"?e.jsx(o.Suspense,{fallback:e.jsx(Se,{componentName:"Content Generator"}),children:e.jsx(Aa,{user:r,onSuccess:Sr,onError:d=>G(d),generatedContent:Ye,setGeneratedContent:be,selectedSubject:T,setSelectedSubject:$,bookContent:m,setBookContent:E,selectedPersona:N,callGeminiAPI:jr,isProUser:ye})}):l==="history"?e.jsx(Ta,{db:re,user:r,onError:()=>G("Failed to load history. Please try again later."),onSuccess:d=>S(d),contentHistory:z,selectedContentId:Tr,onContentSelectionHandled:()=>Ar(null)}):l==="purchase"?e.jsx(o.Suspense,{fallback:e.jsx(Se,{componentName:"Purchase PRO"}),children:e.jsx(Oa,{onBack:()=>u("generation")})}):null;return e.jsx(Qn,{children:e.jsxs("div",{className:`min-h-screen flex flex-col ${c==="dark"?"dark":""} bg-gray-50 dark:bg-gray-900`,children:[e.jsx(ga,{currentPage:l,setCurrentPage:Rt,currentSettingsPage:f,theme:c,setTheme:p,user:r,onLogout:Cr,onNavigateToSettings:Pt,isVoiceListening:Ze,onVoiceToggle:Nr,isVoiceSupported:br,voiceError:yr,unreadNotifications:Le.filter(d=>!d.read).length,onNotificationCenterToggle:()=>_t(!et)}),e.jsx(Na,{message:"Complete your profile to unlock new features!",targetSelector:".profile-completion-target",position:"right",duration:1e4,actions:[{label:"Complete Now",handler:()=>{S("Navigating to profile..."),Pt("profile")},primary:!0}],showArrow:!0}),et&&e.jsx(wa,{isOpen:et,onClose:()=>_t(!1),notifications:Le,onMarkAsRead:d=>console.log(`Marked ${d} as read`),onDeleteNotification:d=>console.log(`Deleted notification ${d}`),preferences:{soundEnabled:!1,autoDismiss:!0,maxNotifications:5},onUpdatePreferences:d=>console.log("Updated preferences:",d)}),Ir,Oe&&e.jsx(Te,{message:Oe,type:"error",onClose:()=>G(""),position:"default"}),I&&e.jsx(Te,{message:I,type:"success",onClose:()=>S(""),position:"default"}),e.jsx(pa,{message:v,type:C}),e.jsxs("main",{className:"flex-1 w-full overflow-hidden pt-16",children:[vr&&e.jsx(Sa,{onClose:kr,onUpgrade:wr}),l==="generation"&&!f&&e.jsx("div",{className:"px-4 pt-4 pb-2",children:e.jsx(ja,{onUpgradeClick:()=>u("purchase")})}),_r()]}),l==="generation"&&!f&&e.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsx(Ca,{user:r,onSuccess:S,onError:G})})]})})},Pa=()=>e.jsx(ln,{children:e.jsx(Jn,{children:e.jsx(La,{})})}),Ma={loadComponent:async(r,t)=>{t(!0);try{const s=await r();return s.default||s}finally{t(!1)}},preloadComponent:r=>{const t=document.createElement("link");t.rel="prefetch",t.href=r.toString().match(/import\(['"](.+?)['"]\)/)?.[1],document.head.appendChild(t)},registerServiceWorker:async()=>{if("serviceWorker"in navigator)try{const r=await navigator.serviceWorker.register("/service-worker.js");return console.log("Service Worker registered:",r),r}catch(r){console.error("Service Worker registration failed:",r)}}},Re={cleanup:()=>{document.querySelectorAll('img[data-cleanup="true"]').forEach(s=>{s.getBoundingClientRect().width||(s.src="")}),document.querySelectorAll('[data-cleanup-listeners="true"]').forEach(s=>{const n=s.cloneNode(!0);s.parentNode.replaceChild(n,s)})},monitorMemory:()=>{if(performance.memory){const r={used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize,limit:performance.memory.jsHeapSizeLimit};return console.log("Memory usage:",r),r.used/r.limit>.8&&(console.warn("High memory usage detected:",r),Re.cleanup()),r}},createWeakCache:()=>{const r=new WeakMap;return{set:(t,s)=>r.set(t,s),get:t=>r.get(t),has:t=>r.has(t),delete:t=>r.delete(t)}}},ft={batchRequests:(r,t=5)=>{const s=[];for(let n=0;n<r.length;n+=t)s.push(r.slice(n,n+t));return s.reduce(async(n,a)=>(await n,Promise.all(a)),Promise.resolve())},createRequestCache:(r=3e5)=>{const t=new Map;return{async get(s,n){const a=t.get(s);if(a&&Date.now()-a.timestamp<r)return a.data;const i=await n();return t.set(s,{data:i,timestamp:Date.now()}),i},clear(){t.clear()},delete(s){t.delete(s)}}},detectConnectionQuality:()=>{const r=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return r?{effectiveType:r.effectiveType,downlink:r.downlink,rtt:r.rtt,saveData:r.saveData}:null},adaptiveLoad:(r,t)=>{const s=ft.detectConnectionQuality();return s&&(s.saveData||s.effectiveType==="slow-2g")?t:r}},pr={init:()=>{"PerformanceObserver"in window&&new PerformanceObserver(t=>{t.getEntries().forEach(n=>{n.entryType==="largest-contentful-paint"&&ge.startTiming("LCP",{value:n.startTime}),n.entryType==="first-input"&&ge.startTiming("FID",{value:n.processingStart-n.startTime}),n.entryType==="layout-shift"&&ge.startTiming("CLS",{value:n.value})})}).observe({entryTypes:["largest-contentful-paint","first-input","layout-shift"]}),setInterval(()=>{Re.monitorMemory()},3e4),"connection"in navigator&&navigator.connection.addEventListener("change",()=>{const r=ft.detectConnectionQuality();console.log("Network quality changed:",r)}),pr.startQualityMetricsTracking()},startQualityMetricsTracking:()=>{console.log("Starting quality metrics tracking..."),window.addEventListener("contentGenerationStart",()=>{ge.startTiming("content-generation")}),window.addEventListener("contentGenerationComplete",s=>{const n=ge.endTiming("content-generation",!0,{contentLength:s.detail?.contentLength||0,generationType:s.detail?.generationType||"unknown"});console.log("Content generation performance:",n)});let r=0;const t=()=>{r++,r%10===0&&console.log(`User interactions: ${r}`)};["click","keydown","scroll"].forEach(s=>{document.addEventListener(s,t,{passive:!0})})},reportMetrics:()=>{const r=ge.getAllMetrics(),t={timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,memory:Re.monitorMemory(),connection:ft.detectConnectionQuality(),metrics:r};return console.log("Performance Report:",t),window.gtag&&window.gtag("event","performance_report",{custom_parameter:JSON.stringify(t)}),t}},Da=()=>{pr.init(),Ma.registerServiceWorker(),Re.monitorMemory(),setInterval(()=>{Re.cleanup()},6e4),console.log("Performance optimizations initialized")};class $a{constructor(){this.errorQueue=[],this.errorStats=new Map,this.retryAttempts=new Map,this.maxRetries=3,this.retryDelay=1e3,this.errorListeners=[],this.criticalErrorThreshold=5,this.setupGlobalErrorHandling()}setupGlobalErrorHandling(){window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason),this.handleError(t.reason,"unhandled-promise"),t.preventDefault()}),window.addEventListener("error",t=>{console.error("JavaScript error:",t.error),this.handleError(t.error,"javascript-error")}),window.addEventListener("online",()=>{this.retryQueuedErrors()}),window.addEventListener("offline",()=>{this.handleOfflineState()})}handleError(t,s="",n={}){const a=this.enhanceError(t,s,n);return this.updateErrorStats(a),this.errorQueue.push(a),this.errorQueue.length>100&&this.errorQueue.shift(),this.notifyListeners(a),this.checkCriticalErrors(a),this.attemptRecovery(a,n),a}enhanceError(t,s,n){const a=t instanceof Z?t:new Z(t.message||"Unknown error occurred",V.GENERAL,"UNKNOWN");return a.context=s,a.sessionId=this.getSessionId(),a.userId=n.userId||null,a.component=n.component||null,a.action=n.action||null,a.severity=this.calculateSeverity(a),a.recoverable=this.isRecoverable(a),a.timestamp=new Date().toISOString(),a.userAgent=navigator.userAgent,a.url=window.location.href,a.stack=t.stack,a}calculateSeverity(t){return t.type===V.AUTHENTICATION||t.type===V.FIRESTORE||t.code==="NETWORK_ERROR"?"HIGH":t.type===V.VALIDATION||t.type===V.API?"MEDIUM":"LOW"}isRecoverable(t){return["NETWORK_ERROR","API_500","API_502","API_503","firestore/unavailable","firestore/resource-exhausted"].includes(t.code)}updateErrorStats(t){const s=`${t.type}-${t.code}`,n=this.errorStats.get(s)||{count:0};this.errorStats.set(s,{count:n.count+1,lastOccurrence:new Date().toISOString(),error:t})}checkCriticalErrors(t){const s=`${t.type}-${t.code}`,n=this.errorStats.get(s);n&&n.count>=this.criticalErrorThreshold&&(console.warn(`Critical error pattern detected: ${s} occurred ${n.count} times`),this.reportCriticalError(t,n),this.handleCriticalError(t,n))}async attemptRecovery(t,s){if(!t.recoverable)return!1;const n=`${t.type}-${t.code}-${t.context}`,a=this.retryAttempts.get(n)||0;if(a>=this.maxRetries)return console.error(`Max retry attempts reached for ${n}`),!1;this.retryAttempts.set(n,a+1);const i=this.retryDelay*Math.pow(2,a);switch(console.log(`Attempting recovery for ${n}, attempt ${a+1} in ${i}ms`),await new Promise(l=>setTimeout(l,i)),t.type){case V.NETWORK:return this.recoverFromNetworkError(t,s);case V.FIRESTORE:return this.recoverFromFirestoreError(t,s);case V.API:return this.recoverFromAPIError(t,s);default:return!1}}async recoverFromNetworkError(t,s){if(!navigator.onLine)return!1;if(s.retryFunction)try{return await s.retryFunction(),console.log(`Network error recovery successful for ${t.context}`),!0}catch(n){return console.error(`Network error recovery failed for ${t.context}:`,n),!1}return!1}async recoverFromFirestoreError(t,s){if((t.code==="firestore/unavailable"||t.code==="firestore/resource-exhausted")&&s.retryFunction)try{return await s.retryFunction(),console.log(`Firestore error recovery successful for ${t.context}`),!0}catch(n){return console.error(`Firestore error recovery failed for ${t.context}:`,n),!1}return!1}async recoverFromAPIError(t,s){if((t.code==="API_500"||t.code==="API_502"||t.code==="API_503")&&s.retryFunction)try{return await s.retryFunction(),console.log(`API error recovery successful for ${t.context}`),!0}catch(n){return console.error(`API error recovery failed for ${t.context}:`,n),!1}return!1}retryQueuedErrors(){console.log("Network connection restored, retrying queued errors..."),this.errorQueue.filter(s=>s.recoverable&&s.type===V.NETWORK).forEach(s=>{this.attemptRecovery(s,{retryFunction:null})})}handleOfflineState(){console.log("Device went offline, error handling adjusted for offline mode");for(const[t,s]of this.retryAttempts.entries())t.includes("network")&&this.retryAttempts.delete(t)}handleCriticalError(t,s){console.warn(`Implementing circuit breaker for ${t.type}-${t.code}`),this.temporarilyDisableFeature(t.context),this.showMaintenanceMessage(t)}temporarilyDisableFeature(t){console.log(`Temporarily disabling feature: ${t}`)}showMaintenanceMessage(t){console.log(`Showing maintenance message for: ${t.type}`)}reportCriticalError(t,s){const n={timestamp:new Date().toISOString(),errorType:t.type,errorCode:t.code,context:t.context,occurrences:s.count,severity:t.severity,userAgent:navigator.userAgent,url:window.location.href,sessionId:this.getSessionId()};console.log("Critical error report:",n)}getSessionId(){return this.sessionId||(this.sessionId=Date.now().toString(36)+Math.random().toString(36).substr(2)),this.sessionId}addErrorListener(t){this.errorListeners.push(t)}removeErrorListener(t){const s=this.errorListeners.indexOf(t);s>-1&&this.errorListeners.splice(s,1)}notifyListeners(t){this.errorListeners.forEach(s=>{try{s(t)}catch(n){console.error("Error in error listener:",n)}})}getErrorStats(){return{totalErrors:this.errorQueue.length,errorsByType:this.groupErrorsByType(),recentErrors:this.getRecentErrors(),criticalErrors:this.getCriticalErrors(),retryStats:this.getRetryStats()}}groupErrorsByType(){const t={};return this.errorQueue.forEach(s=>{const n=s.type;t[n]=(t[n]||0)+1}),t}getRecentErrors(t=5){const s=new Date(Date.now()-t*60*1e3);return this.errorQueue.filter(n=>new Date(n.timestamp)>s)}getCriticalErrors(){return this.errorQueue.filter(t=>t.severity==="HIGH")}getRetryStats(){const t={};for(const[s,n]of this.retryAttempts.entries())t[s]=n;return t}clearErrorQueue(){this.errorQueue=[],this.errorStats.clear(),this.retryAttempts.clear()}exportErrorLog(){const t={timestamp:new Date().toISOString(),sessionId:this.getSessionId(),errors:this.errorQueue,stats:this.getErrorStats()},s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`error-log-${new Date().toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(n)}}const fr=new $a;let no=class extends X.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){const n=fr.handleError(t,"react-component",{component:this.props.componentName||"Unknown",errorInfo:s});this.setState({error:n,errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback(this.state.error,this.state.errorInfo):e.jsx("div",{className:"error-boundary min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Something went wrong"}),e.jsx("p",{className:"text-sm text-gray-500",children:"An error occurred while loading this component"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-700",children:this.state.error?.message})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Reload Page"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"Try Again"})]}),!1]})]})}):this.props.children}};class oo extends X.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(){return{hasError:!0,errorId:Date.now().toString(36)+Math.random().toString(36).substr(2)}}componentDidCatch(t,s){console.error(" Error Boundary Caught:",t),console.error(" Error Info:",s),this.setState({error:t,errorInfo:s}),typeof window<"u"&&window.Sentry&&window.Sentry.captureException(t,{contexts:{react:{componentStack:s.componentStack,errorBoundary:this.constructor.name}}})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})};handleReload=()=>{window.location.reload()};getErrorType=t=>{if(!t)return"unknown";const s=t.message||t.toString();return s.includes("Maximum update depth exceeded")?"infinite-loop":s.includes("Cannot read property")||s.includes("Cannot read properties")?"null-reference":s.includes("Network Error")||s.includes("fetch")?"network":s.includes("ChunkLoadError")||s.includes("Loading chunk")?"chunk-load":"javascript"};getErrorDetails=t=>{switch(t){case"infinite-loop":return{title:"Infinite Loop Detected",description:"A component is stuck in an infinite update loop. This usually happens when a useEffect or useState causes continuous re-renders.",icon:Ie,color:"red",suggestions:["Check useEffect dependencies for missing or incorrect values","Ensure setState is not called directly in render functions","Verify that object/array dependencies are properly memoized","Check for circular references in component props"]};case"null-reference":return{title:"Null Reference Error",description:"The application tried to access a property or method on a null or undefined value.",icon:ks,color:"orange",suggestions:["Check if data is loaded before accessing properties","Use optional chaining (?.) or default values","Verify API responses are properly structured","Add loading states for asynchronous data"]};case"network":return{title:"Network Error",description:"Failed to communicate with the server. This might be a temporary connectivity issue.",icon:Ds,color:"blue",suggestions:["Check your internet connection","Try refreshing the page","Verify server is accessible","Check for CORS issues in development"]};case"chunk-load":return{title:"Resource Load Error",description:"Failed to load application resources. This might happen after a deployment.",icon:He,color:"purple",suggestions:["Refresh the page to load updated resources","Clear browser cache and cookies","Check for network connectivity","Try in a different browser or incognito mode"]};default:return{title:"Application Error",description:"An unexpected error occurred in the application.",icon:Ie,color:"red",suggestions:["Try refreshing the page","Check browser console for more details","Report this issue if it persists","Try using a different browser"]}}};render(){if(this.state.hasError){const{error:t,errorInfo:s,errorId:n}=this.state,a=this.getErrorType(t),i=this.getErrorDetails(a),l={red:"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-200",orange:"bg-orange-50 border-orange-200 text-orange-800 dark:bg-orange-900/20 dark:border-orange-800 dark:text-orange-200",blue:"bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-200",purple:"bg-purple-50 border-purple-200 text-purple-800 dark:bg-purple-900/20 dark:border-purple-800 dark:text-purple-200"},u={red:"bg-red-600 hover:bg-red-700 text-white",orange:"bg-orange-600 hover:bg-orange-700 text-white",blue:"bg-blue-600 hover:bg-blue-700 text-white",purple:"bg-purple-600 hover:bg-purple-700 text-white"};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-2xl w-full",children:e.jsx("div",{className:`rounded-lg border-2 p-6 ${l[i.color]}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[X.createElement(i.icon,{className:"w-8 h-8 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:i.title}),e.jsx("p",{className:"text-sm mb-4",children:i.description}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"What you can try:"}),e.jsx("ul",{className:"text-sm list-disc list-inside space-y-1",children:i.suggestions.map((c,p)=>e.jsx("li",{children:c},p))})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxs("button",{onClick:this.handleRetry,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${u[i.color]} flex items-center space-x-2`,children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:this.handleReload,className:"px-4 py-2 rounded-md text-sm font-medium bg-gray-600 hover:bg-gray-700 text-white flex items-center space-x-2",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Reload Page"})]})]}),!1]})]})})})})}return this.props.children}}Da();fr.addErrorListener(r=>{console.log("Global error caught:",r)});"serviceWorker"in navigator?window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(r=>{console.log("Service Worker registered successfully:",r.scope)}).catch(r=>{console.log("Service Worker registration failed:",r)})}):"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(r){for(let t of r)console.log("Unregistering service worker in development"),t.unregister()}).catch(r=>{console.log("Failed to unregister service workers:",r)});const Ua=document.getElementById("root"),Fa=nr(Ua);Fa.render(e.jsx(Pa,{}));export{ys as B,Ht as C,Ca as F,sa as O,Xs as S,lt as V,ir as Z,Ne as _,ut as a,ht as b,U as c,Ce as d,mt as e,Xa as f,so as g,eo as h,ro as i,e as j,Kn as k,Cs as l,Ss as m,Ts as n,Ue as p,J as u,to as v};
