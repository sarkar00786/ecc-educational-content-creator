import{f as o,e as v,h as m,j as e}from"./index-DD3tM9vS.js";import{r as d}from"./vendor-B8cRsngS.js";import{m as f,D as C,l as I}from"./firebase-D3F21gxB.js";import{a as L}from"./aiPersonas-CCT0hpoi.js";const V=({user:n,onBack:j,userSettings:p,onUpdateSettings:y,isProUser:c})=>{const[t,s]=d.useState({defaultOutputLength:"",defaultInstructions:"",promptTemplates:[],modelSettings:{temperature:.7,maxTokens:1e3,topP:.9,topK:40,responseStyle:"balanced",modelVersion:"gemini-pro"}}),[x,b]=d.useState(!1),[k,g]=d.useState(""),[w,i]=d.useState(""),[h,N]=d.useState(p?.selectedPersona||"educator");d.useEffect(()=>{N(p?.selectedPersona||"educator")},[p?.selectedPersona]),d.useEffect(()=>{(async()=>{if(!n||!o){const r=m.load();s(r);return}try{const r=v(),u=f(o,`artifacts/${r}/users/${n.uid}/settings/advanced`),S=await I(u);if(S.exists()){const l=S.data();s({defaultOutputLength:l.defaultOutputLength||"",defaultInstructions:l.defaultInstructions||"",promptTemplates:l.promptTemplates||[],modelSettings:{temperature:l.modelSettings?.temperature||.7,maxTokens:l.modelSettings?.maxTokens||1e3,topP:l.modelSettings?.topP||.9,topK:l.modelSettings?.topK||40,responseStyle:l.modelSettings?.responseStyle||"balanced",modelVersion:l.modelSettings?.modelVersion||"gemini-pro"}})}else{const l=m.load();s(l)}}catch(r){console.error("Error loading advanced settings from Firestore:",r);const u=m.load();s(u)}})()},[n]);const P=()=>t.defaultOutputLength&&(isNaN(t.defaultOutputLength)||t.defaultOutputLength<1||t.defaultOutputLength>1e4)?(i("Default output length must be a number between 1 and 10,000"),!1):t.modelSettings.temperature<0||t.modelSettings.temperature>1?(i("Temperature must be between 0 and 1"),!1):t.modelSettings.maxTokens<1||t.modelSettings.maxTokens>4e3?(i("Max tokens must be between 1 and 4,000"),!1):!0,T=d.useCallback(async()=>{if(P()){b(!0),g(""),i("");try{if(n&&o){const a=v(),r=f(o,`artifacts/${a}/users/${n.uid}/settings/advanced`);await C(r,{...t,updatedAt:new Date,createdAt:new Date},{merge:!0}),m.save(t),g("Advanced settings saved successfully!")}else m.save(t)?g("Advanced settings saved successfully!"):i("Failed to save advanced settings. Please try again.");setTimeout(()=>g(""),3e3)}catch(a){console.error("Error saving advanced settings:",a),i("An error occurred while saving advanced settings.")}finally{b(!1)}}},[t,n,o]),A=d.useCallback(async()=>{b(!0);try{const a=m.reset();if(s(a),n&&o){const r=v(),u=f(o,`artifacts/${r}/users/${n.uid}/settings/advanced`);await C(u,{...a,updatedAt:new Date,createdAt:new Date},{merge:!0})}g("Advanced settings reset to default!"),setTimeout(()=>g(""),3e3)}catch(a){console.error("Error resetting settings:",a),i("An error occurred while resetting settings.")}finally{b(!1)}},[n,o]);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"w-full px-8 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Advanced Settings"}),e.jsx("button",{onClick:j,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"← Back"})]}),k&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:k}),w&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:w}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Default Content Generation Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Output Word Count"}),e.jsx("input",{type:"number",value:t.defaultOutputLength,onChange:a=>s({...t,defaultOutputLength:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., 500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Custom Instructions"}),e.jsx("textarea",{value:t.defaultInstructions,onChange:a=>s({...t,defaultInstructions:a.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white h-32",placeholder:"Enter your default instructions here..."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"AI Model Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"About AI Model Parameters"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"These settings control how the AI generates content. Higher temperature creates more creative but less predictable outputs."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Temperature (Creativity Level): ",e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:t.modelSettings.temperature})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.modelSettings.temperature,onChange:a=>s({...t,modelSettings:{...t.modelSettings,temperature:parseFloat(a.target.value)}}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:"0.0 - Conservative"}),e.jsx("span",{children:"0.5 - Balanced"}),e.jsx("span",{children:"1.0 - Creative"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:[t.modelSettings.temperature<=.3&&"Conservative: Predictable, factual responses",t.modelSettings.temperature>.3&&t.modelSettings.temperature<=.7&&"Balanced: Mix of creativity and accuracy",t.modelSettings.temperature>.7&&"Creative: More varied and creative responses"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Max Output Tokens: ",e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:t.modelSettings.maxTokens})]}),e.jsx("input",{type:"range",min:"100",max:"4000",step:"100",value:t.modelSettings.maxTokens,onChange:a=>s({...t,modelSettings:{...t.modelSettings,maxTokens:parseInt(a.target.value)}}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:"100 - Short"}),e.jsx("span",{children:"2000 - Medium"}),e.jsx("span",{children:"4000 - Long"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Approximate words: ",Math.round(t.modelSettings.maxTokens*.75)," words"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Top-p (Nucleus Sampling): ",e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:t.modelSettings.topP||.9})]}),e.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:t.modelSettings.topP||.9,onChange:a=>s({...t,modelSettings:{...t.modelSettings,topP:parseFloat(a.target.value)}}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:"0.1 - Focused"}),e.jsx("span",{children:"0.5 - Moderate"}),e.jsx("span",{children:"1.0 - Diverse"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:"Controls diversity of word choice. Lower values = more focused responses."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Top-k (Token Limit): ",e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:t.modelSettings.topK||40})]}),e.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:t.modelSettings.topK||40,onChange:a=>s({...t,modelSettings:{...t.modelSettings,topK:parseInt(a.target.value)}}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:"1 - Very focused"}),e.jsx("span",{children:"40 - Balanced"}),e.jsx("span",{children:"100 - Very diverse"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:"Limits vocabulary to top-k most likely tokens. Lower values = more predictable responses."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Response Style"}),e.jsxs("select",{value:t.modelSettings.responseStyle||"balanced",onChange:a=>s({...t,modelSettings:{...t.modelSettings,responseStyle:a.target.value}}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"concise",children:"Concise - Brief and to the point"}),e.jsx("option",{value:"balanced",children:"Balanced - Moderate detail level"}),e.jsx("option",{value:"detailed",children:"Detailed - Comprehensive explanations"}),e.jsx("option",{value:"creative",children:"Creative - Engaging and imaginative"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Model Version"}),e.jsxs("select",{value:t.modelSettings.modelVersion||"gemini-pro",onChange:a=>s({...t,modelSettings:{...t.modelSettings,modelVersion:a.target.value}}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"gemini-pro",children:"Gemini Pro - Balanced performance"}),e.jsx("option",{value:"gemini-pro-vision",children:"Gemini Pro Vision - Image understanding"}),e.jsx("option",{value:"gemini-ultra",children:"Gemini Ultra - Highest quality (when available)"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:"Choose the AI model version for content generation. Higher tier models may have better quality but slower response times."})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:["AI Persona Selection",e.jsx("span",{className:"ml-2 bg-purple-600 text-white text-xs font-semibold px-2 py-1 rounded-full",children:"PRO"})]}),!c&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4 text-sm text-yellow-800 dark:text-yellow-300",children:"Upgrade to PRO to unlock AI Persona customization for tailored content generation!"}),e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${c?"":"opacity-50 cursor-not-allowed"}`,children:L.map(a=>e.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer transition-all duration-200 ${h===a.id?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-500":"border-gray-300 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-600"}`,children:[e.jsx("input",{type:"radio",name:"aiPersona",value:a.id,checked:h===a.id,onChange:r=>{N(r.target.value),c&&y&&y({selectedPersona:r.target.value})},className:"form-radio h-5 w-5 text-blue-600 dark:text-blue-400",disabled:!c}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description})]})]},a.id))}),c&&e.jsx("button",{onClick:()=>y({selectedPersona:h}),disabled:!c||h===p?.selectedPersona,className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save Persona"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Prompt Templates"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Custom prompt templates are coming soon. This feature will allow you to save and reuse custom prompts for different types of content generation."})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:T,disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[x&&e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x?"Saving...":"Save Settings"]}),e.jsx("button",{onClick:A,disabled:x,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset to Default"}),e.jsx("button",{onClick:j,disabled:x,className:"px-6 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})})})};export{V as default};
